import{a as G,n as q,k as T,ao as Q,m as w,ap as D,B as I,d as $,p as U,r as O,i as W,x as k,q as A,aq as X,w as Y,G as Z,F as J,Z as ee,o as te,ar as oe,H as re,h as R,as as ne,I as ae,at as se,_ as ie,a7 as C,au as le,ah as de,aa as ce}from"./index.ef367bc1.js";const F=G&&"loading"in document.createElement("img"),ue=(e={})=>{var n;const{root:l=null}=e;return{hash:`${e.rootMargin||"0px 0px 0px 0px"}-${Array.isArray(e.threshold)?e.threshold.join(","):(n=e.threshold)!==null&&n!==void 0?n:"0"}`,options:Object.assign(Object.assign({},e),{root:(typeof l=="string"?document.querySelector(l):l)||document.documentElement})}},B=new WeakMap,_=new WeakMap,P=new WeakMap,fe=(e,n,l)=>{if(!e)return()=>{};const s=ue(n),{root:c}=s.options;let i;const u=B.get(c);u?i=u:(i=new Map,B.set(c,i));let h,a;i.has(s.hash)?(a=i.get(s.hash),a[1].has(e)||(h=a[0],a[1].add(e),h.observe(e))):(h=new IntersectionObserver(b=>{b.forEach(f=>{if(f.isIntersecting){const p=_.get(f.target),g=P.get(f.target);p&&p(),g&&(g.value=!0)}})},s.options),h.observe(e),a=[h,new Set([e])],i.set(s.hash,a));let m=!1;const y=()=>{m||(_.delete(e),P.delete(e),m=!0,a[1].has(e)&&(a[0].unobserve(e),a[1].delete(e)),a[1].size<=0&&i.delete(s.hash),i.size||B.delete(c))};return _.set(e,y),P.set(e,l),y},ve=q("n-avatar-group"),he=T("avatar",`
 width: var(--n-merged-size);
 height: var(--n-merged-size);
 color: #FFF;
 font-size: var(--n-font-size);
 display: inline-flex;
 position: relative;
 overflow: hidden;
 text-align: center;
 border: var(--n-border);
 border-radius: var(--n-border-radius);
 --n-merged-color: var(--n-color);
 background-color: var(--n-merged-color);
 transition:
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
`,[Q(w("&","--n-merged-color: var(--n-color-modal);")),D(w("&","--n-merged-color: var(--n-color-popover);")),w("img",`
 width: 100%;
 height: 100%;
 `),I("text",`
 white-space: nowrap;
 display: inline-block;
 position: absolute;
 left: 50%;
 top: 50%;
 `),T("icon",`
 vertical-align: bottom;
 font-size: calc(var(--n-merged-size) - 6px);
 `),I("text","line-height: 1.25")]),ge=Object.assign(Object.assign({},A.props),{size:[String,Number],src:String,circle:{type:Boolean,default:void 0},objectFit:String,round:{type:Boolean,default:void 0},bordered:{type:Boolean,default:void 0},onError:Function,fallbackSrc:String,intersectionObserverOptions:Object,lazy:Boolean,onLoad:Function,renderPlaceholder:Function,renderFallback:Function,imgProps:Object,color:String}),me=$({name:"Avatar",props:ge,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:l}=U(e),s=O(!1);let c=null;const i=O(null),u=O(null),h=()=>{const{value:t}=i;if(t&&(c===null||c!==t.innerHTML)){c=t.innerHTML;const{value:o}=u;if(o){const{offsetWidth:d,offsetHeight:r}=o,{offsetWidth:v,offsetHeight:L}=t,j=.9,S=Math.min(d/v*j,r/L*j,1);t.style.transform=`translateX(-50%) translateY(-50%) scale(${S})`}}},a=W(ve,null),m=k(()=>{const{size:t}=e;if(t)return t;const{size:o}=a||{};return o||"medium"}),y=A("Avatar","-avatar",he,ne,e,n),b=W(X,null),f=k(()=>{if(a)return!0;const{round:t,circle:o}=e;return t!==void 0||o!==void 0?t||o:b?b.roundRef.value:!1}),p=k(()=>a?!0:e.bordered||!1),g=t=>{var o;if(!x.value)return;s.value=!0;const{onError:d,imgProps:r}=e;(o=r==null?void 0:r.onError)===null||o===void 0||o.call(r,t),d&&d(t)};Y(()=>e.src,()=>s.value=!1);const H=k(()=>{const t=m.value,o=f.value,d=p.value,{color:r}=e,{self:{borderRadius:v,fontSize:L,color:j,border:S,colorModal:N,colorPopover:V},common:{cubicBezierEaseInOut:K}}=y.value;let E;return typeof t=="number"?E=`${t}px`:E=y.value.self[ae("height",t)],{"--n-font-size":L,"--n-border":d?S:"none","--n-border-radius":o?"50%":v,"--n-color":r||j,"--n-color-modal":r||N,"--n-color-popover":r||V,"--n-bezier":K,"--n-merged-size":`var(--n-avatar-size-override, ${E})`}}),z=l?Z("avatar",k(()=>{const t=m.value,o=f.value,d=p.value,{color:r}=e;let v="";return t&&(typeof t=="number"?v+=`a${t}`:v+=t[0]),o&&(v+="b"),d&&(v+="c"),r&&(v+=se(r)),v}),H,e):void 0,x=O(!e.lazy);J(()=>{if(F)return;let t;const o=ee(()=>{t==null||t(),t=void 0,e.lazy&&(t=fe(u.value,e.intersectionObserverOptions,x))});te(()=>{o(),t==null||t()})});const M=O(!e.lazy);return{textRef:i,selfRef:u,mergedRoundRef:f,mergedClsPrefix:n,fitTextTransform:h,cssVars:l?void 0:H,themeClass:z==null?void 0:z.themeClass,onRender:z==null?void 0:z.onRender,hasLoadError:s,handleError:g,shouldStartLoading:x,loaded:M,mergedOnLoad:t=>{var o;const{onLoad:d,imgProps:r}=e;d==null||d(t),(o=r==null?void 0:r.onLoad)===null||o===void 0||o.call(r,t),M.value=!0}}},render(){var e,n;const{$slots:l,src:s,mergedClsPrefix:c,lazy:i,onRender:u,mergedOnLoad:h,shouldStartLoading:a,loaded:m,hasLoadError:y}=this;u==null||u();let b;const f=!m&&!y&&(this.renderPlaceholder?this.renderPlaceholder():(n=(e=this.$slots).placeholder)===null||n===void 0?void 0:n.call(e));return this.hasLoadError?b=this.renderFallback?this.renderFallback():oe(l.fallback,()=>[R("img",{src:this.fallbackSrc,style:{objectFit:this.objectFit}})]):b=re(l.default,p=>{if(p)return R(ie,{onResize:this.fitTextTransform},{default:()=>R("span",{ref:"textRef",class:`${c}-avatar__text`},p)});if(s){const{imgProps:g}=this;return R("img",Object.assign(Object.assign({},g),{loading:F&&!this.intersectionObserverOptions&&i?"lazy":"eager",src:F||a||m?s:void 0,onLoad:h,"data-image-src":s,onError:this.handleError,style:[g==null?void 0:g.style,{objectFit:this.objectFit},f?{height:"0",width:"0",visibility:"hidden",position:"absolute"}:""]}))}}),R("span",{ref:"selfRef",class:[`${c}-avatar`,this.themeClass],style:this.cssVars},b,i&&f)}});function be(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ce(e)}const ye=$({name:"RayLink",setup(){return{handleLinkClick:l=>{window.open(l.src)},avatarOptions:[{key:"yunhome",src:"https://yunkuangao.me/",tooltip:"\u4E91\u4E4B\u5BB6",icon:"https://yunkuangao.me/wp-content/uploads/2022/05/cropped-cropped-QQ%E5%9B%BE%E7%89%8720220511113928.jpg"},{key:"yun-cloud-images",src:"https://yunkuangao.com/",tooltip:"\u4E91\u56FE\u5E8A",icon:"https://yunkuangao.com/images/20170801_005902048_iOS.md.jpg"},{key:"ray-js-note",src:"https://note.youdao.com/s/ObWEe2BB",tooltip:"Ray\u7684\u524D\u7AEF\u5B66\u4E60\u7B14\u8BB0",icon:"https://avatars.githubusercontent.com/u/51957438?v=4"},{key:"ray-js-cover",src:"https://note.youdao.com/s/IC8xKPdB",tooltip:"Ray\u7684\u9762\u8BD5\u9898\u603B\u7ED3",icon:"https://avatars.githubusercontent.com/u/51957438?v=4"}]}},render(){let e;return C(de,null,be(e=this.avatarOptions.map(n=>C(le,null,{trigger:()=>C(me,{round:!0,src:n.icon,style:["cursor: pointer"],onClick:this.handleLinkClick.bind(this,n),objectFit:"cover"},null),default:()=>n.tooltip})))?e:{default:()=>[e]})}});export{ye as R};
