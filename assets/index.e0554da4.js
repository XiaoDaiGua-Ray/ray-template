import{n as G,k as T,ao as K,m as w,ap as q,B,d as $,p as Q,r as k,i as I,x as O,q as A,aq as D,w as U,G as X,F as Y,Z,o as J,ar as ee,H as te,h as R,_ as oe,as as re,I as ne,at as ae,a7 as F,au as se,ah as ie,ab as le}from"./index.315d5fe6.js";const de=!1,ce=(e={})=>{var n;const{root:i=null}=e;return{hash:`${e.rootMargin||"0px 0px 0px 0px"}-${Array.isArray(e.threshold)?e.threshold.join(","):(n=e.threshold)!==null&&n!==void 0?n:"0"}`,options:Object.assign(Object.assign({},e),{root:(typeof i=="string"?document.querySelector(i):i)||document.documentElement})}},C=new WeakMap,_=new WeakMap,H=new WeakMap,ue=(e,n,i)=>{if(!e)return()=>{};const s=ce(n),{root:c}=s.options;let l;const u=C.get(c);u?l=u:(l=new Map,C.set(c,l));let h,a;l.has(s.hash)?(a=l.get(s.hash),a[1].has(e)||(h=a[0],a[1].add(e),h.observe(e))):(h=new IntersectionObserver(m=>{m.forEach(f=>{if(f.isIntersecting){const p=_.get(f.target),g=H.get(f.target);p&&p(),g&&(g.value=!0)}})},s.options),h.observe(e),a=[h,new Set([e])],l.set(s.hash,a));let b=!1;const y=()=>{b||(_.delete(e),H.delete(e),b=!0,a[1].has(e)&&(a[0].unobserve(e),a[1].delete(e)),a[1].size<=0&&l.delete(s.hash),l.size||C.delete(c))};return _.set(e,y),H.set(e,i),y},fe=G("n-avatar-group"),ve=T("avatar",`
 width: var(--n-merged-size);
 height: var(--n-merged-size);
 color: #FFF;
 font-size: var(--n-font-size);
 display: inline-flex;
 position: relative;
 overflow: hidden;
 text-align: center;
 border: var(--n-border);
 border-radius: var(--n-border-radius);
 --n-merged-color: var(--n-color);
 background-color: var(--n-merged-color);
 transition:
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
`,[K(w("&","--n-merged-color: var(--n-color-modal);")),q(w("&","--n-merged-color: var(--n-color-popover);")),w("img",`
 width: 100%;
 height: 100%;
 `),B("text",`
 white-space: nowrap;
 display: inline-block;
 position: absolute;
 left: 50%;
 top: 50%;
 `),T("icon",`
 vertical-align: bottom;
 font-size: calc(var(--n-merged-size) - 6px);
 `),B("text","line-height: 1.25")]),he=Object.assign(Object.assign({},A.props),{size:[String,Number],src:String,circle:{type:Boolean,default:void 0},objectFit:String,round:{type:Boolean,default:void 0},bordered:{type:Boolean,default:void 0},onError:Function,fallbackSrc:String,intersectionObserverOptions:Object,lazy:Boolean,onLoad:Function,renderPlaceholder:Function,renderFallback:Function,imgProps:Object,color:String}),ge=$({name:"Avatar",props:he,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:i}=Q(e),s=k(!1);let c=null;const l=k(null),u=k(null),h=()=>{const{value:t}=l;if(t&&(c===null||c!==t.innerHTML)){c=t.innerHTML;const{value:o}=u;if(o){const{offsetWidth:d,offsetHeight:r}=o,{offsetWidth:v,offsetHeight:L}=t,j=.9,S=Math.min(d/v*j,r/L*j,1);t.style.transform=`translateX(-50%) translateY(-50%) scale(${S})`}}},a=I(fe,null),b=O(()=>{const{size:t}=e;if(t)return t;const{size:o}=a||{};return o||"medium"}),y=A("Avatar","-avatar",ve,re,e,n),m=I(D,null),f=O(()=>{if(a)return!0;const{round:t,circle:o}=e;return t!==void 0||o!==void 0?t||o:m?m.roundRef.value:!1}),p=O(()=>a?!0:e.bordered||!1),g=t=>{var o;if(!x.value)return;s.value=!0;const{onError:d,imgProps:r}=e;(o=r==null?void 0:r.onError)===null||o===void 0||o.call(r,t),d&&d(t)};U(()=>e.src,()=>s.value=!1);const M=O(()=>{const t=b.value,o=f.value,d=p.value,{color:r}=e,{self:{borderRadius:v,fontSize:L,color:j,border:S,colorModal:N,colorPopover:W},common:{cubicBezierEaseInOut:V}}=y.value;let E;return typeof t=="number"?E=`${t}px`:E=y.value.self[ne("height",t)],{"--n-font-size":L,"--n-border":d?S:"none","--n-border-radius":o?"50%":v,"--n-color":r||j,"--n-color-modal":r||N,"--n-color-popover":r||W,"--n-bezier":V,"--n-merged-size":`var(--n-avatar-size-override, ${E})`}}),z=i?X("avatar",O(()=>{const t=b.value,o=f.value,d=p.value,{color:r}=e;let v="";return t&&(typeof t=="number"?v+=`a${t}`:v+=t[0]),o&&(v+="b"),d&&(v+="c"),r&&(v+=ae(r)),v}),M,e):void 0,x=k(!e.lazy);Y(()=>{if(de)return;let t;const o=Z(()=>{t==null||t(),t=void 0,e.lazy&&(t=ue(u.value,e.intersectionObserverOptions,x))});J(()=>{o(),t==null||t()})});const P=k(!e.lazy);return{textRef:l,selfRef:u,mergedRoundRef:f,mergedClsPrefix:n,fitTextTransform:h,cssVars:i?void 0:M,themeClass:z==null?void 0:z.themeClass,onRender:z==null?void 0:z.onRender,hasLoadError:s,handleError:g,shouldStartLoading:x,loaded:P,mergedOnLoad:t=>{var o;const{onLoad:d,imgProps:r}=e;d==null||d(t),(o=r==null?void 0:r.onLoad)===null||o===void 0||o.call(r,t),P.value=!0}}},render(){var e,n;const{$slots:i,src:s,mergedClsPrefix:c,lazy:l,onRender:u,mergedOnLoad:h,shouldStartLoading:a,loaded:b,hasLoadError:y}=this;u==null||u();let m;const f=!b&&!y&&(this.renderPlaceholder?this.renderPlaceholder():(n=(e=this.$slots).placeholder)===null||n===void 0?void 0:n.call(e));return this.hasLoadError?m=this.renderFallback?this.renderFallback():ee(i.fallback,()=>[R("img",{src:this.fallbackSrc,style:{objectFit:this.objectFit}})]):m=te(i.default,p=>{if(p)return R(oe,{onResize:this.fitTextTransform},{default:()=>R("span",{ref:"textRef",class:`${c}-avatar__text`},p)});if(s){const{imgProps:g}=this;return R("img",Object.assign(Object.assign({},g),{loading:"eager",src:a||b?s:void 0,onLoad:h,"data-image-src":s,onError:this.handleError,style:[g==null?void 0:g.style,{objectFit:this.objectFit},f?{height:"0",width:"0",visibility:"hidden",position:"absolute"}:""]}))}}),R("span",{ref:"selfRef",class:[`${c}-avatar`,this.themeClass],style:this.cssVars},m,l&&f)}});function be(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!le(e)}const pe=$({name:"RayLink",setup(){return{handleLinkClick:i=>{window.open(i.src)},avatarOptions:[{key:"yunhome",src:"https://yunkuangao.me/",tooltip:"\u4E91\u4E4B\u5BB6",icon:"https://yunkuangao.me/wp-content/uploads/2022/05/cropped-cropped-QQ%E5%9B%BE%E7%89%8720220511113928.jpg"},{key:"yun-cloud-images",src:"https://yunkuangao.com/",tooltip:"\u4E91\u56FE\u5E8A",icon:"https://yunkuangao.com/images/20170801_005902048_iOS.md.jpg"}]}},render(){let e;return F(ie,null,be(e=this.avatarOptions.map(n=>F(se,null,{trigger:()=>F(ge,{round:!0,src:n.icon,style:["cursor: pointer"],onClick:this.handleLinkClick.bind(this,n),objectFit:"cover"},null),default:()=>n.tooltip})))?e:{default:()=>[e]})}});export{pe as R};
