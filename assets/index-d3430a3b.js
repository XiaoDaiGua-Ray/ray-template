import{s as R}from"./pinia-15a322aa.js";import{c as $,d as L}from"./lodash-es-1a3ec8cd.js";import{b as V,o as U,c as D,d as z}from"./index-d84b3024.js";import{u as h,i as j,a as M,b as N,c as P,d as W,e as I,f as q,g as G,h as H,j as X,k as J,l as K,m as Q,n as Y,o as Z,p as _,q as ee,r as te}from"./echarts-2fc78c0b.js";import{e as S,r as d,l as ae,w as E,h as se,o as ne,n as ue,f as ie,ab as t,c as i}from"./@vue-a5f4faa6.js";import{W as o,U as oe,n as v}from"./naive-ui-54973a8c.js";import"./vue-demi-71ba0ef2.js";import"./pinia-plugin-persistedstate-d93b4f94.js";import"./vue-i18n-1b078a41.js";import"./@intlify-bd5dfa46.js";import"./vue-router-dc1ee7d4.js";import"./@vueuse-a5326c57.js";import"./screenfull-578bfdd4.js";import"./date-fns-7f923de7.js";import"./vueuc-b41d756f.js";import"./evtd-b614532e.js";import"./seemly-dc6f1e91.js";import"./@css-render-379872f5.js";import"./vooks-a21d2fcd.js";import"./vdirs-b0483831.js";import"./@juggle-41516555.js";import"./css-render-57962bc1.js";import"./@emotion-8a8e73f6.js";import"./treemate-25c27bff.js";import"./date-fns-tz-230e778e.js";import"./async-validator-dee29e8b.js";import"./zrender-e8935425.js";const c=S({name:"RayChart",props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},autoResize:{type:[Boolean,Object],default:!0},canvasRender:{type:Boolean,default:!0},showAria:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},success:{type:Function,default:()=>({})},error:{type:Function,default:()=>({})},theme:{type:[String,Object],default:""},autoChangeTheme:{type:Boolean,default:!1},use:{type:Array,default:()=>[]},watchOptions:{type:Boolean,default:!0}},setup(e){const p=V(),{themeValue:r}=R(p),y=d(),g=d();let a,m;const C=ae(()=>({"--ray-chart-width":e.width,"--ray-chart-height":e.height})),b=async()=>{h([M,N,P,W,I,q,G,H]),h([X,J,K,Q,Y,Z]),h([_,ee]),h([te]);try{h(e.use)}catch{console.error("Error: wrong property and method passed in extend attribute")}},u=()=>{let s=$(e.options);const l=f=>Object.assign({},s,f);return e.showAria&&(s=l({aria:{enabled:!0,decal:{show:!0}}})),s},n=s=>{var w,B;const l=y.value,f=u(),{height:x,width:k}=l.getBoundingClientRect();x===0&&D(l,{height:"200px"}),k===0&&D(l,{width:"200px"});try{a=j(l,s),g.value=a,f&&a.setOption(f),(w=e.success)==null||w.call(e,a)}catch(T){(B=e.error)==null||B.call(e),console.error(T)}},A=s=>{if(e.autoChangeTheme){n(s?"dark":"");return}e.theme||n("")},F=()=>{a&&(a.clear(),a.dispose())},O=()=>{a&&a.resize()};return E(()=>[r.value],([s])=>{e.autoChangeTheme&&(F(),A(s))}),E(()=>e.showAria,()=>{F(),(e.autoChangeTheme||e.theme)&&r.value?n("dark"):n("")}),e.watchOptions&&E(()=>e.watchOptions,()=>{const s=u();a==null||a.setOption(s)}),se(async()=>{await b()}),ne(()=>{ue(()=>{e.autoChangeTheme?A(r.value):e.theme?n("dark"):n(""),e.autoResize&&(m=L(O,500),z(window,"resize",m))})}),ie(()=>{F(),U(window,"resize",m)}),{rayChartRef:y,cssVarsRef:C,echartInstance:g}},render(){return t("div",{class:"ray-chart",style:[this.cssVarsRef],ref:"rayChartRef"},null)}}),Ve=S({name:"Echart",setup(){const e=d(),p=d(!1),r=d(!1);return{baseOptions:{legend:{},tooltip:{},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{name:"日期",data:[120,200,150,80,70,110,130],type:"bar",showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"}}]},baseChartRef:e,chartLoading:p,handleLoadingShow:u=>{if(e.value){const{echartInstance:n}=e.value;u?n.showLoading():n.hideLoading()}},chartAria:r,handleAriaShow:u=>{r.value=u},handleChartRenderSuccess:u=>{window.$notification.info({title:"可视化图渲染成功回调函数",content:"可视化图渲染成功, 并且返回了当前可视化图实例",duration:5*1e3})},basePieOptions:{title:{text:"Referer of a Website",subtext:"Fake Data",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"Access From",type:"pie",radius:"50%",data:[{value:1048,name:"Search Engine"},{value:735,name:"Direct"},{value:580,name:"Email"},{value:484,name:"Union Ads"},{value:300,name:"Video Ads"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},baseLineOptions:{title:{text:"Stacked Area Chart"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["Email","Union Ads","Video Ads","Direct","Search Engine"]},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]}],yAxis:[{type:"value"}],series:[{name:"Email",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:[120,132,101,134,90,230,210]},{name:"Union Ads",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:[220,182,191,234,290,330,310]},{name:"Video Ads",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:[150,232,201,154,190,330,410]},{name:"Direct",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:[320,332,301,334,390,330,320]},{name:"Search Engine",type:"line",stack:"Total",label:{show:!0,position:"top"},areaStyle:{},emphasis:{focus:"series"},data:[820,932,901,934,1290,1330,1320]}]}}},render(){return t("div",{class:"echart"},[t(o,null,{default:()=>[i("RayChart 组件使用")]}),t(oe,null,{default:()=>[i("该组件会默认以 200*200 宽高进行填充。预设了常用的图、方法组件，如果不满足需求，需要用 use 方法进行手动拓展。该组件实现了自动跟随模板主题切换功能，但是动态切换损耗较大，所以默认不启用")]}),t(o,null,{default:()=>[i("基础使用")]}),t("div",{class:"chart--container"},[t(c,{options:this.baseOptions},null)]),t(o,null,{default:()=>[i("渲染成功后运行回调函数")]}),t("div",{class:"chart--container"},[t(c,{options:this.basePieOptions,success:this.handleChartRenderSuccess.bind(this)},null)]),t(o,null,{default:()=>[i("能跟随主题切换的可视化图")]}),t("div",{class:"chart--container"},[t(c,{autoChangeTheme:!0,options:this.baseLineOptions,showAria:this.chartAria},null)]),t(o,null,{default:()=>[i("不跟随主题切换的暗色主题可视化图")]}),t("div",{class:"chart--container"},[t(c,{theme:"dark",options:this.baseOptions},null)]),t(o,null,{default:()=>[i("加载动画")]}),t(v,{value:this.chartLoading,"onUpdate:value":e=>this.chartLoading=e,onUpdateValue:this.handleLoadingShow.bind(this),style:["padding: 18px 0"]},{checked:()=>"隐藏加载动画",unchecked:()=>"显示加载动画"}),t("div",{class:"chart--container"},[t(c,{ref:"baseChartRef",options:this.baseOptions},null)]),t(o,null,{default:()=>[i("贴画可视化图")]}),t(v,{value:this.chartAria,"onUpdate:value":e=>this.chartAria=e,onUpdateValue:this.handleAriaShow.bind(this),style:["padding: 18px 0"]},{checked:()=>"隐藏贴花",unchecked:()=>"显示贴花"}),t("div",{class:"chart--container"},[t(c,{options:this.baseOptions,showAria:this.chartAria},null)])])}});export{Ve as default};
