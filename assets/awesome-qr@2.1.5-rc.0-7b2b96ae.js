import{c as N}from"./@babel_runtime@7.22.11-b49cf076.js";import{b as Pe}from"./canvas@2.11.2-f05bd587.js";import{g as Ce,l as Re,u as Ee}from"./js-binary-schema-parser@2.0.3-9e47f7a8.js";var Be={},Jt={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.QRMath=r.QRUtil=r.QRMaskPattern=r.QRErrorCorrectLevel=r.QRCodeModel=void 0;function u(n,t,a){var s=p(t),e=n-1,i=0;switch(a){case r.QRErrorCorrectLevel.L:i=B[e][0];break;case r.QRErrorCorrectLevel.M:i=B[e][1];break;case r.QRErrorCorrectLevel.Q:i=B[e][2];break;case r.QRErrorCorrectLevel.H:i=B[e][3];break}return s<=i}function o(n,t){for(var a=1,s=p(n),e=0,i=B.length;e<i;e++){var f=0;switch(t){case r.QRErrorCorrectLevel.L:f=B[e][0];break;case r.QRErrorCorrectLevel.M:f=B[e][1];break;case r.QRErrorCorrectLevel.Q:f=B[e][2];break;case r.QRErrorCorrectLevel.H:f=B[e][3];break}if(s<=f)break;a++}if(a>B.length)throw new Error("Too long data");return a}function p(n){var t=encodeURI(n).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=Number(n)?3:0)}var v=function(){function n(t){this.mode=c.MODE_8BIT_BYTE,this.parsedData=[],this.data=t;for(var a=[],s=0,e=this.data.length;s<e;s++){var i=[],f=this.data.charCodeAt(s);f>65536?(i[0]=240|(f&1835008)>>>18,i[1]=128|(f&258048)>>>12,i[2]=128|(f&4032)>>>6,i[3]=128|f&63):f>2048?(i[0]=224|(f&61440)>>>12,i[1]=128|(f&4032)>>>6,i[2]=128|f&63):f>128?(i[0]=192|(f&1984)>>>6,i[1]=128|f&63):i[0]=f,a.push(i)}this.parsedData=Array.prototype.concat.apply([],a),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}return n.prototype.getLength=function(){return this.parsedData.length},n.prototype.write=function(t){for(var a=0,s=this.parsedData.length;a<s;a++)t.put(this.parsedData[a],8)},n}(),g=function(){function n(t,a){t===void 0&&(t=-1),a===void 0&&(a=r.QRErrorCorrectLevel.L),this.moduleCount=0,this.dataList=[],this.typeNumber=t,this.errorCorrectLevel=a,this.moduleCount=0,this.dataList=[]}return n.prototype.addData=function(t){if(this.typeNumber<=0)this.typeNumber=o(t,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error("Invalid QR version: "+this.typeNumber);if(!u(this.typeNumber,t,this.errorCorrectLevel))throw new Error("Data is too long for QR version: "+this.typeNumber)}var a=new v(t);this.dataList.push(a),this.dataCache=void 0},n.prototype.isDark=function(t,a){if(t<0||this.moduleCount<=t||a<0||this.moduleCount<=a)throw new Error(t+","+a);return this.modules[t][a]},n.prototype.getModuleCount=function(){return this.moduleCount},n.prototype.make=function(){this.makeImpl(!1,this.getBestMaskPattern())},n.prototype.makeImpl=function(t,a){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++){this.modules[s]=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[s][e]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,a),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=n.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,a)},n.prototype.setupPositionProbePattern=function(t,a){for(var s=-1;s<=7;s++)if(!(t+s<=-1||this.moduleCount<=t+s))for(var e=-1;e<=7;e++)a+e<=-1||this.moduleCount<=a+e||(0<=s&&s<=6&&(e==0||e==6)||0<=e&&e<=6&&(s==0||s==6)||2<=s&&s<=4&&2<=e&&e<=4?this.modules[t+s][a+e]=!0:this.modules[t+s][a+e]=!1)},n.prototype.getBestMaskPattern=function(){if(Number.isInteger(this.maskPattern)&&Object.values(r.QRMaskPattern).includes(this.maskPattern))return this.maskPattern;for(var t=0,a=0,s=0;s<8;s++){this.makeImpl(!0,s);var e=P.getLostPoint(this);(s==0||t>e)&&(t=e,a=s)}return a},n.prototype.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var a=8;a<this.moduleCount-8;a++)this.modules[6][a]==null&&(this.modules[6][a]=a%2==0)},n.prototype.setupPositionAdjustPattern=function(){for(var t=P.getPatternPosition(this.typeNumber),a=0;a<t.length;a++)for(var s=0;s<t.length;s++){var e=t[a],i=t[s];if(this.modules[e][i]==null)for(var f=-2;f<=2;f++)for(var l=-2;l<=2;l++)f==-2||f==2||l==-2||l==2||f==0&&l==0?this.modules[e+f][i+l]=!0:this.modules[e+f][i+l]=!1}},n.prototype.setupTypeNumber=function(t){for(var a=P.getBCHTypeNumber(this.typeNumber),s=0;s<18;s++){var e=!t&&(a>>s&1)==1;this.modules[Math.floor(s/3)][s%3+this.moduleCount-8-3]=e}for(var s=0;s<18;s++){var e=!t&&(a>>s&1)==1;this.modules[s%3+this.moduleCount-8-3][Math.floor(s/3)]=e}},n.prototype.setupTypeInfo=function(t,a){for(var s=this.errorCorrectLevel<<3|a,e=P.getBCHTypeInfo(s),i=0;i<15;i++){var f=!t&&(e>>i&1)==1;i<6?this.modules[i][8]=f:i<8?this.modules[i+1][8]=f:this.modules[this.moduleCount-15+i][8]=f}for(var i=0;i<15;i++){var f=!t&&(e>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=f:i<9?this.modules[8][15-i-1+1]=f:this.modules[8][15-i-1]=f}this.modules[this.moduleCount-8][8]=!t},n.prototype.mapData=function(t,a){for(var s=-1,e=this.moduleCount-1,i=7,f=0,l=this.moduleCount-1;l>0;l-=2)for(l==6&&l--;;){for(var d=0;d<2;d++)if(this.modules[e][l-d]==null){var m=!1;f<t.length&&(m=(t[f]>>>i&1)==1);var _=P.getMask(a,e,l-d);_&&(m=!m),this.modules[e][l-d]=m,i--,i==-1&&(f++,i=7)}if(e+=s,e<0||this.moduleCount<=e){e-=s,s=-s;break}}},n.createData=function(t,a,s){for(var e=D.getRSBlocks(t,a),i=new E,f=0;f<s.length;f++){var l=s[f];i.put(l.mode,4),i.put(l.getLength(),P.getLengthInBits(l.mode,t)),l.write(i)}for(var d=0,f=0;f<e.length;f++)d+=e[f].dataCount;if(i.getLengthInBits()>d*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+d*8+")");for(i.getLengthInBits()+4<=d*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=d*8||(i.put(n.PAD0,8),i.getLengthInBits()>=d*8));)i.put(n.PAD1,8);return n.createBytes(i,e)},n.createBytes=function(t,a){for(var s=0,e=0,i=0,f=new Array(a.length),l=new Array(a.length),d=0;d<a.length;d++){var m=a[d].dataCount,_=a[d].totalCount-m;e=Math.max(e,m),i=Math.max(i,_),f[d]=new Array(m);for(var y=0;y<f[d].length;y++)f[d][y]=255&t.buffer[y+s];s+=m;var T=P.getErrorCorrectPolynomial(_),M=new w(f[d],T.getLength()-1),h=M.mod(T);l[d]=new Array(T.getLength()-1);for(var y=0;y<l[d].length;y++){var L=y+h.getLength()-l[d].length;l[d][y]=L>=0?h.get(L):0}}for(var R=0,y=0;y<a.length;y++)R+=a[y].totalCount;for(var A=new Array(R),C=0,y=0;y<e;y++)for(var d=0;d<a.length;d++)y<f[d].length&&(A[C++]=f[d][y]);for(var y=0;y<i;y++)for(var d=0;d<a.length;d++)y<l[d].length&&(A[C++]=l[d][y]);return A},n.PAD0=236,n.PAD1=17,n}();r.QRCodeModel=g,r.QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var c={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8};r.QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var P=function(){function n(){}return n.getBCHTypeInfo=function(t){for(var a=t<<10;n.getBCHDigit(a)-n.getBCHDigit(n.G15)>=0;)a^=n.G15<<n.getBCHDigit(a)-n.getBCHDigit(n.G15);return(t<<10|a)^n.G15_MASK},n.getBCHTypeNumber=function(t){for(var a=t<<12;n.getBCHDigit(a)-n.getBCHDigit(n.G18)>=0;)a^=n.G18<<n.getBCHDigit(a)-n.getBCHDigit(n.G18);return t<<12|a},n.getBCHDigit=function(t){for(var a=0;t!=0;)a++,t>>>=1;return a},n.getPatternPosition=function(t){return n.PATTERN_POSITION_TABLE[t-1]},n.getMask=function(t,a,s){switch(t){case r.QRMaskPattern.PATTERN000:return(a+s)%2==0;case r.QRMaskPattern.PATTERN001:return a%2==0;case r.QRMaskPattern.PATTERN010:return s%3==0;case r.QRMaskPattern.PATTERN011:return(a+s)%3==0;case r.QRMaskPattern.PATTERN100:return(Math.floor(a/2)+Math.floor(s/3))%2==0;case r.QRMaskPattern.PATTERN101:return a*s%2+a*s%3==0;case r.QRMaskPattern.PATTERN110:return(a*s%2+a*s%3)%2==0;case r.QRMaskPattern.PATTERN111:return(a*s%3+(a+s)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},n.getErrorCorrectPolynomial=function(t){for(var a=new w([1],0),s=0;s<t;s++)a=a.multiply(new w([1,b.gexp(s)],0));return a},n.getLengthInBits=function(t,a){if(1<=a&&a<10)switch(t){case c.MODE_NUMBER:return 10;case c.MODE_ALPHA_NUM:return 9;case c.MODE_8BIT_BYTE:return 8;case c.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(a<27)switch(t){case c.MODE_NUMBER:return 12;case c.MODE_ALPHA_NUM:return 11;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(a<41)switch(t){case c.MODE_NUMBER:return 14;case c.MODE_ALPHA_NUM:return 13;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+a)},n.getLostPoint=function(t){for(var a=t.getModuleCount(),s=0,e=0;e<a;e++)for(var i=0;i<a;i++){for(var f=0,l=t.isDark(e,i),d=-1;d<=1;d++)if(!(e+d<0||a<=e+d))for(var m=-1;m<=1;m++)i+m<0||a<=i+m||d==0&&m==0||l==t.isDark(e+d,i+m)&&f++;f>5&&(s+=3+f-5)}for(var e=0;e<a-1;e++)for(var i=0;i<a-1;i++){var _=0;t.isDark(e,i)&&_++,t.isDark(e+1,i)&&_++,t.isDark(e,i+1)&&_++,t.isDark(e+1,i+1)&&_++,(_==0||_==4)&&(s+=3)}for(var e=0;e<a;e++)for(var i=0;i<a-6;i++)t.isDark(e,i)&&!t.isDark(e,i+1)&&t.isDark(e,i+2)&&t.isDark(e,i+3)&&t.isDark(e,i+4)&&!t.isDark(e,i+5)&&t.isDark(e,i+6)&&(s+=40);for(var i=0;i<a;i++)for(var e=0;e<a-6;e++)t.isDark(e,i)&&!t.isDark(e+1,i)&&t.isDark(e+2,i)&&t.isDark(e+3,i)&&t.isDark(e+4,i)&&!t.isDark(e+5,i)&&t.isDark(e+6,i)&&(s+=40);for(var y=0,i=0;i<a;i++)for(var e=0;e<a;e++)t.isDark(e,i)&&y++;var T=Math.abs(100*y/a/a-50)/5;return s+=T*10,s},n.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n.G15=1335,n.G18=7973,n.G15_MASK=21522,n}();r.QRUtil=P;var b=function(){function n(){}return n.glog=function(t){if(t<1)throw new Error("glog("+t+")");return n.LOG_TABLE[t]},n.gexp=function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return n.EXP_TABLE[t]},n.EXP_TABLE=new Array(256),n.LOG_TABLE=new Array(256),n._constructor=function(){for(var t=0;t<8;t++)n.EXP_TABLE[t]=1<<t;for(var t=8;t<256;t++)n.EXP_TABLE[t]=n.EXP_TABLE[t-4]^n.EXP_TABLE[t-5]^n.EXP_TABLE[t-6]^n.EXP_TABLE[t-8];for(var t=0;t<255;t++)n.LOG_TABLE[n.EXP_TABLE[t]]=t}(),n}();r.QRMath=b;var w=function(){function n(t,a){if(t.length==null)throw new Error(t.length+"/"+a);for(var s=0;s<t.length&&t[s]==0;)s++;this.num=new Array(t.length-s+a);for(var e=0;e<t.length-s;e++)this.num[e]=t[e+s]}return n.prototype.get=function(t){return this.num[t]},n.prototype.getLength=function(){return this.num.length},n.prototype.multiply=function(t){for(var a=new Array(this.getLength()+t.getLength()-1),s=0;s<this.getLength();s++)for(var e=0;e<t.getLength();e++)a[s+e]^=b.gexp(b.glog(this.get(s))+b.glog(t.get(e)));return new n(a,0)},n.prototype.mod=function(t){if(this.getLength()-t.getLength()<0)return this;for(var a=b.glog(this.get(0))-b.glog(t.get(0)),s=new Array(this.getLength()),e=0;e<this.getLength();e++)s[e]=this.get(e);for(var e=0;e<t.getLength();e++)s[e]^=b.gexp(b.glog(t.get(e))+a);return new n(s,0).mod(t)},n}(),D=function(){function n(t,a){this.totalCount=t,this.dataCount=a}return n.getRSBlocks=function(t,a){var s=n.getRsBlockTable(t,a);if(s==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+a);for(var e=s.length/3,i=[],f=0;f<e;f++)for(var l=s[f*3+0],d=s[f*3+1],m=s[f*3+2],_=0;_<l;_++)i.push(new n(d,m));return i},n.getRsBlockTable=function(t,a){switch(a){case r.QRErrorCorrectLevel.L:return n.RS_BLOCK_TABLE[(t-1)*4+0];case r.QRErrorCorrectLevel.M:return n.RS_BLOCK_TABLE[(t-1)*4+1];case r.QRErrorCorrectLevel.Q:return n.RS_BLOCK_TABLE[(t-1)*4+2];case r.QRErrorCorrectLevel.H:return n.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n}(),E=function(){function n(){this.buffer=[],this.length=0}return n.prototype.get=function(t){var a=Math.floor(t/8);return(this.buffer[a]>>>7-t%8&1)==1},n.prototype.put=function(t,a){for(var s=0;s<a;s++)this.putBit((t>>>a-s-1&1)==1)},n.prototype.getLengthInBits=function(){return this.length},n.prototype.putBit=function(t){var a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),t&&(this.buffer[a]|=128>>>this.length%8),this.length++},n}(),B=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]]})(Jt);var It={},pe={},Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.deinterlace=void 0;Ft.deinterlace=function(r,u){for(var o=new Array(r.length),p=r.length/u,v=function(D,E){var B=r.slice(E*u,(E+1)*u);o.splice.apply(o,[D*u,u].concat(B))},g=[0,4,2,1],c=[8,8,4,2],P=0,b=0;b<4;b++)for(var w=g[b];w<p;w+=c[b])v(w,P),P++;return o};var xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.lzw=void 0;xt.lzw=function(r,u,o){var p=4096,v=-1,g=o,c,P,b,w,D,E,B,d,n,t,l,a,m,_,T,y,s=new Array(o),e=new Array(p),i=new Array(p),f=new Array(p+1);for(a=r,P=1<<a,D=P+1,c=P+2,B=v,w=a+1,b=(1<<w)-1,n=0;n<P;n++)e[n]=0,i[n]=n;var l,d,m,_,y,T;for(l=d=m=_=y=T=0,t=0;t<g;){if(_===0){if(d<w){l+=u[T]<<d,d+=8,T++;continue}if(n=l&b,l>>=w,d-=w,n>c||n==D)break;if(n==P){w=a+1,b=(1<<w)-1,c=P+2,B=v;continue}if(B==v){f[_++]=i[n],B=n,m=n;continue}for(E=n,n==c&&(f[_++]=m,n=B);n>P;)f[_++]=i[n],n=e[n];m=i[n]&255,f[_++]=m,c<p&&(e[c]=B,i[c]=m,c++,!(c&b)&&c<p&&(w++,b+=c)),B=E}_--,s[y++]=f[_],t++}for(t=y;t<g;t++)s[t]=0;return s};(function(r){var u=N&&N.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(r,"__esModule",{value:!0}),r.decompressFrames=r.decompressFrame=r.parseGIF=void 0;var o=u(Ce),p=Re,v=Ee,g=Ft,c=xt;r.parseGIF=function(b){var w=new Uint8Array(b);return p.parse(v.buildStream(w),o.default)};var P=function(b){for(var w=b.pixels.length,D=new Uint8ClampedArray(w*4),E=0;E<w;E++){var B=E*4,n=b.pixels[E],t=b.colorTable[n];D[B]=t[0],D[B+1]=t[1],D[B+2]=t[2],D[B+3]=n!==b.transparentIndex?255:0}return D};r.decompressFrame=function(b,w,D){if(!b.image){console.warn("gif frame does not have associated image.");return}var E=b.image,B=E.descriptor.width*E.descriptor.height,n=c.lzw(E.data.minCodeSize,E.data.blocks,B);E.descriptor.lct.interlaced&&(n=g.deinterlace(n,E.descriptor.width));var t={pixels:n,dims:{top:b.image.descriptor.top,left:b.image.descriptor.left,width:b.image.descriptor.width,height:b.image.descriptor.height}};return E.descriptor.lct&&E.descriptor.lct.exists?t.colorTable=E.lct:t.colorTable=w,b.gce&&(t.delay=(b.gce.delay||10)*10,t.disposalType=b.gce.extras.disposal,b.gce.extras.transparentColorGiven&&(t.transparentIndex=b.gce.transparentColorIndex)),D&&(t.patch=P(t)),t},r.decompressFrames=function(b,w){return b.frames.filter(function(D){return D.image}).map(function(D){return r.decompressFrame(D,b.gct,w)})}})(pe);var De=100,x=256,le=x-1,rt=4,me=16,Wt=1<<me,we=10,Zt=10,Te=Wt>>Zt,Ae=Wt<<we-Zt,Me=x>>3,Xt=6,Le=1<<Xt,ke=Me*Le,Ie=30,be=10,Dt=1<<be,ye=8,fe=1<<ye,Fe=be+ye,lt=1<<Fe,ue=499,he=491,ce=487,_e=503,xe=3*_e;function Qe(r,u){var o,p,v,g,c;function P(){o=[],p=new Int32Array(256),v=new Int32Array(x),g=new Int32Array(x),c=new Int32Array(x>>3);var e,i;for(e=0;e<x;e++)i=(e<<rt+8)/x,o[e]=new Float64Array([i,i,i,0]),g[e]=Wt/x,v[e]=0}function b(){for(var e=0;e<x;e++)o[e][0]>>=rt,o[e][1]>>=rt,o[e][2]>>=rt,o[e][3]=e}function w(e,i,f,l,d){o[i][0]-=e*(o[i][0]-f)/Dt,o[i][1]-=e*(o[i][1]-l)/Dt,o[i][2]-=e*(o[i][2]-d)/Dt}function D(e,i,f,l,d){for(var m=Math.abs(i-e),_=Math.min(i+e,x),y=i+1,T=i-1,M=1,h,L;y<_||T>m;)L=c[M++],y<_&&(h=o[y++],h[0]-=L*(h[0]-f)/lt,h[1]-=L*(h[1]-l)/lt,h[2]-=L*(h[2]-d)/lt),T>m&&(h=o[T--],h[0]-=L*(h[0]-f)/lt,h[1]-=L*(h[1]-l)/lt,h[2]-=L*(h[2]-d)/lt)}function E(e,i,f){var l=2147483647,d=l,m=-1,_=m,y,T,M,h,L;for(y=0;y<x;y++)T=o[y],M=Math.abs(T[0]-e)+Math.abs(T[1]-i)+Math.abs(T[2]-f),M<l&&(l=M,m=y),h=M-(v[y]>>me-rt),h<d&&(d=h,_=y),L=g[y]>>Zt,g[y]-=L,v[y]+=L<<we;return g[m]+=Te,v[m]-=Ae,_}function B(){var e,i,f,l,d,m,_=0,y=0;for(e=0;e<x;e++){for(f=o[e],d=e,m=f[1],i=e+1;i<x;i++)l=o[i],l[1]<m&&(d=i,m=l[1]);if(l=o[d],e!=d&&(i=l[0],l[0]=f[0],f[0]=i,i=l[1],l[1]=f[1],f[1]=i,i=l[2],l[2]=f[2],f[2]=i,i=l[3],l[3]=f[3],f[3]=i),m!=_){for(p[_]=y+e>>1,i=_+1;i<m;i++)p[i]=e;_=m,y=e}}for(p[_]=y+le>>1,i=_+1;i<256;i++)p[i]=le}function n(e,i,f){for(var l,d,m,_=1e3,y=-1,T=p[i],M=T-1;T<x||M>=0;)T<x&&(d=o[T],m=d[1]-i,m>=_?T=x:(T++,m<0&&(m=-m),l=d[0]-e,l<0&&(l=-l),m+=l,m<_&&(l=d[2]-f,l<0&&(l=-l),m+=l,m<_&&(_=m,y=d[3])))),M>=0&&(d=o[M],m=i-d[1],m>=_?M=-1:(M--,m<0&&(m=-m),l=d[0]-e,l<0&&(l=-l),m+=l,m<_&&(l=d[2]-f,l<0&&(l=-l),m+=l,m<_&&(_=m,y=d[3]))));return y}function t(){var e,i=r.length,f=30+(u-1)/3,l=i/(3*u),d=~~(l/De),m=Dt,_=ke,y=_>>Xt;for(y<=1&&(y=0),e=0;e<y;e++)c[e]=m*((y*y-e*e)*fe/(y*y));var T;i<xe?(u=1,T=3):i%ue!==0?T=3*ue:i%he!==0?T=3*he:i%ce!==0?T=3*ce:T=3*_e;var M,h,L,R,A=0;for(e=0;e<l;)if(M=(r[A]&255)<<rt,h=(r[A+1]&255)<<rt,L=(r[A+2]&255)<<rt,R=E(M,h,L),w(m,R,M,h,L),y!==0&&D(y,R,M,h,L),A+=T,A>=i&&(A-=i),e++,d===0&&(d=1),e%d===0)for(m-=m/f,_-=_/Ie,y=_>>Xt,y<=1&&(y=0),R=0;R<y;R++)c[R]=m*((y*y-R*R)*fe/(y*y))}function a(){P(),t(),b(),B()}this.buildColormap=a;function s(){for(var e=[],i=[],f=0;f<x;f++)i[o[f][3]]=f;for(var l=0,d=0;d<x;d++){var m=i[d];e[l++]=o[m][0],e[l++]=o[m][1],e[l++]=o[m][2]}return e}this.getColormap=s,this.lookupRGB=n}var Se=Qe,ve=-1,Tt=12,bt=5003,Oe=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function Ne(r,u,o,p){var v=Math.max(2,p),g=new Uint8Array(256),c=new Int32Array(bt),P=new Int32Array(bt),b,w=0,D,E=0,B,n=!1,t,a,s,e,i,f;function l(R,A){g[D++]=R,D>=254&&T(A)}function d(R){m(bt),E=a+2,n=!0,L(a,R)}function m(R){for(var A=0;A<R;++A)c[A]=-1}function _(R,A){var C,Y,F,K,Z,q,j;for(t=R,n=!1,f=t,B=M(f),a=1<<R-1,s=a+1,E=a+2,D=0,K=h(),j=0,C=bt;C<65536;C*=2)++j;j=8-j,q=bt,m(q),L(a,A);t:for(;(Y=h())!=ve;){if(C=(Y<<Tt)+K,F=Y<<j^K,c[F]===C){K=P[F];continue}else if(c[F]>=0){Z=q-F,F===0&&(Z=1);do if((F-=Z)<0&&(F+=q),c[F]===C){K=P[F];continue t}while(c[F]>=0)}L(K,A),K=Y,E<1<<Tt?(P[F]=E++,c[F]=C):d(A)}L(K,A),L(s,A)}function y(R){R.writeByte(v),e=r*u,i=0,_(v+1,R),R.writeByte(0)}function T(R){D>0&&(R.writeByte(D),R.writeBytes(g,0,D),D=0)}function M(R){return(1<<R)-1}function h(){if(e===0)return ve;--e;var R=o[i++];return R&255}function L(R,A){for(b&=Oe[w],w>0?b|=R<<w:b=R,w+=f;w>=8;)l(b&255,A),b>>=8,w-=8;if((E>B||n)&&(n?(B=M(f=t),n=!1):(++f,f==Tt?B=1<<Tt:B=M(f))),R==s){for(;w>0;)l(b&255,A),b>>=8,w-=8;T(A)}}this.encode=y}var Ge=Ne,Ue=Se,He=Ge;function G(){this.page=-1,this.pages=[],this.newPage()}G.pageSize=4096;G.charMap={};for(var At=0;At<256;At++)G.charMap[At]=String.fromCharCode(At);G.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(G.pageSize),this.cursor=0};G.prototype.getData=function(){for(var r="",u=0;u<this.pages.length;u++)for(var o=0;o<G.pageSize;o++)r+=G.charMap[this.pages[u][o]];return r};G.prototype.toFlattenUint8Array=function(){for(var r=[],u=0;u<this.pages.length;u++)if(u===this.pages.length-1){var o=Uint8Array.from(this.pages[u].slice(0,this.cursor));r.push(o)}else r.push(this.pages[u]);var p=new Uint8Array(r.reduce(function(v,g){return v+g.length},0));return r.reduce(function(v,g){return p.set(g,v),v+g.length},0),p};G.prototype.writeByte=function(r){this.cursor>=G.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=r};G.prototype.writeUTFBytes=function(r){for(var u=r.length,o=0;o<u;o++)this.writeByte(r.charCodeAt(o))};G.prototype.writeBytes=function(r,u,o){for(var p=o||r.length,v=u||0;v<p;v++)this.writeByte(r[v])};function I(r,u){this.width=~~r,this.height=~~u,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new G}I.prototype.setDelay=function(r){this.delay=Math.round(r/10)};I.prototype.setFrameRate=function(r){this.delay=Math.round(100/r)};I.prototype.setDispose=function(r){r>=0&&(this.dispose=r)};I.prototype.setRepeat=function(r){this.repeat=r};I.prototype.setTransparent=function(r){this.transparent=r};I.prototype.addFrame=function(r){this.image=r,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),!this.firstFrame&&!this.globalPalette&&this.writePalette(),this.writePixels(),this.firstFrame=!1};I.prototype.finish=function(){this.out.writeByte(59)};I.prototype.setQuality=function(r){r<1&&(r=1),this.sample=r};I.prototype.setDither=function(r){r===!0&&(r="FloydSteinberg"),this.dither=r};I.prototype.setGlobalPalette=function(r){this.globalPalette=r};I.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};I.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};I.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new Ue(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent,!0))};I.prototype.indexPixels=function(r){var u=this.pixels.length/3;this.indexedPixels=new Uint8Array(u);for(var o=0,p=0;p<u;p++){var v=this.findClosestRGB(this.pixels[o++]&255,this.pixels[o++]&255,this.pixels[o++]&255);this.usedEntry[v]=!0,this.indexedPixels[p]=v}};I.prototype.ditherPixels=function(r,u){var o={FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]]};if(!r||!o[r])throw"Unknown dithering kernel: "+r;var p=o[r],v=0,g=this.height,c=this.width,P=this.pixels,b=u?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var w=0;w<g;w++){u&&(b=b*-1);for(var D=b==1?0:c-1,E=b==1?c:0;D!==E;D+=b){v=w*c+D;var B=v*3,n=P[B],t=P[B+1],a=P[B+2];B=this.findClosestRGB(n,t,a),this.usedEntry[B]=!0,this.indexedPixels[v]=B,B*=3;for(var s=this.colorTab[B],e=this.colorTab[B+1],i=this.colorTab[B+2],f=n-s,l=t-e,d=a-i,m=b==1?0:p.length-1,_=b==1?p.length:0;m!==_;m+=b){var y=p[m][1],T=p[m][2];if(y+D>=0&&y+D<c&&T+w>=0&&T+w<g){var M=p[m][0];B=v+y+T*c,B*=3,P[B]=Math.max(0,Math.min(255,P[B]+f*M)),P[B+1]=Math.max(0,Math.min(255,P[B+1]+l*M)),P[B+2]=Math.max(0,Math.min(255,P[B+2]+d*M))}}}}};I.prototype.findClosest=function(r,u){return this.findClosestRGB((r&16711680)>>16,(r&65280)>>8,r&255,u)};I.prototype.findClosestRGB=function(r,u,o,p){if(this.colorTab===null)return-1;if(this.neuQuant&&!p)return this.neuQuant.lookupRGB(r,u,o);for(var v=0,g=256*256*256,c=this.colorTab.length,P=0,b=0;P<c;b++){var w=r-(this.colorTab[P++]&255),D=u-(this.colorTab[P++]&255),E=o-(this.colorTab[P++]&255),B=w*w+D*D+E*E;(!p||this.usedEntry[b])&&B<g&&(g=B,v=b)}return v};I.prototype.getImagePixels=function(){var r=this.width,u=this.height;this.pixels=new Uint8Array(r*u*3);for(var o=this.image,p=0,v=0,g=0;g<u;g++)for(var c=0;c<r;c++)this.pixels[v++]=o[p++],this.pixels[v++]=o[p++],this.pixels[v++]=o[p++],p++};I.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var r,u;this.transparent===null?(r=0,u=0):(r=1,u=2),this.dispose>=0&&(u=this.dispose&7),u<<=2,this.out.writeByte(0|u|0|r),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)};I.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)};I.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)};I.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)};I.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var r=3*256-this.colorTab.length,u=0;u<r;u++)this.out.writeByte(0)};I.prototype.writeShort=function(r){this.out.writeByte(r&255),this.out.writeByte(r>>8&255)};I.prototype.writePixels=function(){var r=new He(this.width,this.height,this.indexedPixels,this.colorDepth);r.encode(this.out)};I.prototype.stream=function(){return this.out};var ze=I,kt=N&&N.__assign||function(){return kt=Object.assign||function(r){for(var u,o=1,p=arguments.length;o<p;o++){u=arguments[o];for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&(r[v]=u[v])}return r},kt.apply(this,arguments)},Ke=N&&N.__awaiter||function(r,u,o,p){function v(g){return g instanceof o?g:new o(function(c){c(g)})}return new(o||(o=Promise))(function(g,c){function P(D){try{w(p.next(D))}catch(E){c(E)}}function b(D){try{w(p.throw(D))}catch(E){c(E)}}function w(D){D.done?g(D.value):v(D.value).then(P,b)}w((p=p.apply(r,u||[])).next())})},je=N&&N.__generator||function(r,u){var o={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},p,v,g,c;return c={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function P(w){return function(D){return b([w,D])}}function b(w){if(p)throw new TypeError("Generator is already executing.");for(;o;)try{if(p=1,v&&(g=w[0]&2?v.return:w[0]?v.throw||((g=v.return)&&g.call(v),0):v.next)&&!(g=g.call(v,w[1])).done)return g;switch(v=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,v=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(g=o.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){o=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){o.label=w[1];break}if(w[0]===6&&o.label<g[1]){o.label=g[1],g=w;break}if(g&&o.label<g[2]){o.label=g[2],o.ops.push(w);break}g[2]&&o.ops.pop(),o.trys.pop();continue}w=u.call(r,o)}catch(D){w=[6,D],v=0}finally{p=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Xe=N&&N.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(It,"__esModule",{value:!0});It.AwesomeQR=void 0;var J=Pe,ge=pe,Mt=Jt,Je=Xe(ze),Lt=.4,We=function(){function r(u){var o=Object.assign({},u);if(Object.keys(r.defaultOptions).forEach(function(p){p in o||Object.defineProperty(o,p,{value:r.defaultOptions[p],enumerable:!0,writable:!0})}),o.components?typeof o.components=="object"&&Object.keys(r.defaultComponentOptions).forEach(function(p){p in o.components?Object.defineProperty(o.components,p,{value:kt(kt({},r.defaultComponentOptions[p]),o.components[p]),enumerable:!0,writable:!0}):Object.defineProperty(o.components,p,{value:r.defaultComponentOptions[p],enumerable:!0,writable:!0})}):o.components=r.defaultComponentOptions,o.dotScale!==null&&o.dotScale!==void 0){if(o.dotScale<=0||o.dotScale>1)throw new Error("dotScale should be in range (0, 1].");o.components.data.scale=o.dotScale,o.components.timing.scale=o.dotScale,o.components.alignment.scale=o.dotScale}this.options=o,this.canvas=J.createCanvas(u.size,u.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new Mt.QRCodeModel(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}return r.prototype.draw=function(){var u=this;return new Promise(function(o){return u._draw().then(o)})},r.prototype._clear=function(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)},r._prepareRoundedCornerClip=function(u,o,p,v,g,c){u.beginPath(),u.moveTo(o,p),u.arcTo(o+v,p,o+v,p+g,c),u.arcTo(o+v,p+g,o,p+g,c),u.arcTo(o,p+g,o,p,c),u.arcTo(o,p,o+v,p,c),u.closePath()},r._getAverageRGB=function(u){var o=5,p={r:0,g:0,b:0},v,g,c=-4,P={r:0,g:0,b:0},b=0;g=u.naturalHeight||u.height,v=u.naturalWidth||u.width;var w=J.createCanvas(v,g),D=w.getContext("2d");if(!D)return p;D.drawImage(u,0,0);var E;try{E=D.getImageData(0,0,v,g)}catch{return p}for(;(c+=o*4)<E.data.length;)E.data[c]>200||E.data[c+1]>200||E.data[c+2]>200||(++b,P.r+=E.data[c],P.g+=E.data[c+1],P.b+=E.data[c+2]);return P.r=~~(P.r/b),P.g=~~(P.g/b),P.b=~~(P.b/b),P},r._drawDot=function(u,o,p,v,g,c){g===void 0&&(g=0),c===void 0&&(c=1),u.fillRect((o+g)*v,(p+g)*v,c*v,c*v)},r._drawAlignProtector=function(u,o,p,v){u.clearRect((o-2)*v,(p-2)*v,5*v,5*v),u.fillRect((o-2)*v,(p-2)*v,5*v,5*v)},r._drawAlign=function(u,o,p,v,g,c,P,b){g===void 0&&(g=0),c===void 0&&(c=1);var w=u.fillStyle;u.fillStyle=P,new Array(4).fill(0).map(function(D,E){r._drawDot(u,o-2+E,p-2,v,g,c),r._drawDot(u,o+2,p-2+E,v,g,c),r._drawDot(u,o+2-E,p+2,v,g,c),r._drawDot(u,o-2,p+2-E,v,g,c)}),r._drawDot(u,o,p,v,g,c),b||(u.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map(function(D,E){r._drawDot(u,o-1+E,p-1,v,g,c),r._drawDot(u,o+1,p-1+E,v,g,c),r._drawDot(u,o+1-E,p+1,v,g,c),r._drawDot(u,o-1,p+1-E,v,g,c)})),u.fillStyle=w},r.prototype._draw=function(){var u,o,p,v,g,c,P,b,w,D,E,B,n,t,a,s,e,i,f;return Ke(this,void 0,void 0,function(){var l,d,m,_,y,T,M,h,L,R,A,C,Y,F,K,Z,q,j,ft,ut,ht,k,W,ct,yt,Q,at,Qt,S,O,St,nt,$t,X,k,Ot,Nt,Vt,U,Yt,k,$,H,z,_t,Gt,k,Ut,qt,Ht,te,k,$,H,z,ee,vt,tt,gt,et,dt,Pt,re,V,ot,pt,st,zt,Ct,ie,ae,Kt,ne;return je(this,function(mt){switch(mt.label){case 0:if(l=(u=this.qrCode)===null||u===void 0?void 0:u.moduleCount,d=this.options.size,m=this.options.margin,(m<0||m*2>=d)&&(m=0),_=Math.ceil(m),y=d-2*m,T=this.options.whiteMargin,M=this.options.backgroundDimming,h=Math.ceil(y/l),L=h*l,R=L+2*_,A=J.createCanvas(R,R),C=A.getContext("2d"),this._clear(),C.save(),C.translate(_,_),Y=J.createCanvas(R,R),F=Y.getContext("2d"),K=null,Z=[],!this.options.gifBackground)return[3,1];if(q=ge.parseGIF(this.options.gifBackground),K=q,Z=ge.decompressFrames(q,!0),this.options.autoColor){for(j=0,ft=0,ut=0,ht=0,k=0;k<Z[0].colorTable.length;k++)W=Z[0].colorTable[k],!(W[0]>200||W[1]>200||W[2]>200)&&(W[0]===0&&W[1]===0&&W[2]===0||(ht++,j+=W[0],ft+=W[1],ut+=W[2]));j=~~(j/ht),ft=~~(ft/ht),ut=~~(ut/ht),this.options.colorDark="rgb("+j+","+ft+","+ut+")"}return[3,4];case 1:return this.options.backgroundImage?[4,J.loadImage(this.options.backgroundImage)]:[3,3];case 2:return ct=mt.sent(),this.options.autoColor&&(yt=r._getAverageRGB(ct),this.options.colorDark="rgb("+yt.r+","+yt.g+","+yt.b+")"),F.drawImage(ct,0,0,ct.width,ct.height,0,0,R,R),F.rect(0,0,R,R),F.fillStyle=M,F.fill(),[3,4];case 3:F.rect(0,0,R,R),F.fillStyle=this.options.colorLight,F.fill(),mt.label=4;case 4:for(Q=Mt.QRUtil.getPatternPosition(this.qrCode.typeNumber),at=((p=(o=this.options.components)===null||o===void 0?void 0:o.data)===null||p===void 0?void 0:p.scale)||Lt,Qt=(1-at)*.5,S=0;S<l;S++)for(O=0;O<l;O++){for(St=this.qrCode.isDark(S,O),nt=O<8&&(S<8||S>=l-8)||O>=l-8&&S<8,$t=S==6&&O>=8&&O<=l-8||O==6&&S>=8&&S<=l-8,X=nt||$t,k=1;k<Q.length-1;k++)X=X||S>=Q[k]-2&&S<=Q[k]+2&&O>=Q[k]-2&&O<=Q[k]+2;Ot=O*h+(X?0:Qt*h),Nt=S*h+(X?0:Qt*h),C.strokeStyle=St?this.options.colorDark:this.options.colorLight,C.lineWidth=.5,C.fillStyle=St?this.options.colorDark:"rgba(255, 255, 255, 0.6)",Q.length===0?X||C.fillRect(Ot,Nt,(X?1:at)*h,(X?1:at)*h):(Vt=O<l-4&&O>=l-4-5&&S<l-4&&S>=l-4-5,!X&&!Vt&&C.fillRect(Ot,Nt,(X?1:at)*h,(X?1:at)*h))}if(U=Q[Q.length-1],Yt="rgba(255, 255, 255, 0.6)",C.fillStyle=Yt,C.fillRect(0,0,8*h,8*h),C.fillRect(0,(l-8)*h,8*h,8*h),C.fillRect((l-8)*h,0,8*h,8*h),!((g=(v=this.options.components)===null||v===void 0?void 0:v.timing)===null||g===void 0)&&g.protectors&&(C.fillRect(8*h,6*h,(l-8-8)*h,h),C.fillRect(6*h,8*h,h,(l-8-8)*h)),!((P=(c=this.options.components)===null||c===void 0?void 0:c.cornerAlignment)===null||P===void 0)&&P.protectors&&r._drawAlignProtector(C,U,U,h),!((w=(b=this.options.components)===null||b===void 0?void 0:b.alignment)===null||w===void 0)&&w.protectors){for(k=0;k<Q.length;k++)for($=0;$<Q.length;$++)if(H=Q[$],z=Q[k],!(H===6&&(z===6||z===U))){if(z===6&&(H===6||H===U))continue;if(H===U&&z===U)continue;r._drawAlignProtector(C,H,z,h)}}for(C.fillStyle=this.options.colorDark,C.fillRect(0,0,7*h,h),C.fillRect((l-7)*h,0,7*h,h),C.fillRect(0,6*h,7*h,h),C.fillRect((l-7)*h,6*h,7*h,h),C.fillRect(0,(l-7)*h,7*h,h),C.fillRect(0,(l-7+6)*h,7*h,h),C.fillRect(0,0,h,7*h),C.fillRect(6*h,0,h,7*h),C.fillRect((l-7)*h,0,h,7*h),C.fillRect((l-7+6)*h,0,h,7*h),C.fillRect(0,(l-7)*h,h,7*h),C.fillRect(6*h,(l-7)*h,h,7*h),C.fillRect(2*h,2*h,3*h,3*h),C.fillRect((l-7+2)*h,2*h,3*h,3*h),C.fillRect(2*h,(l-7+2)*h,3*h,3*h),_t=((E=(D=this.options.components)===null||D===void 0?void 0:D.timing)===null||E===void 0?void 0:E.scale)||Lt,Gt=(1-_t)*.5,k=0;k<l-8;k+=2)r._drawDot(C,8+k,6,h,Gt,_t),r._drawDot(C,6,8+k,h,Gt,_t);for(Ut=((n=(B=this.options.components)===null||B===void 0?void 0:B.cornerAlignment)===null||n===void 0?void 0:n.scale)||Lt,qt=(1-Ut)*.5,r._drawAlign(C,U,U,h,qt,Ut,this.options.colorDark,((a=(t=this.options.components)===null||t===void 0?void 0:t.cornerAlignment)===null||a===void 0?void 0:a.protectors)||!1),Ht=((e=(s=this.options.components)===null||s===void 0?void 0:s.alignment)===null||e===void 0?void 0:e.scale)||Lt,te=(1-Ht)*.5,k=0;k<Q.length;k++)for($=0;$<Q.length;$++)if(H=Q[$],z=Q[k],!(H===6&&(z===6||z===U))){if(z===6&&(H===6||H===U))continue;if(H===U&&z===U)continue;r._drawAlign(C,H,z,h,te,Ht,this.options.colorDark,((f=(i=this.options.components)===null||i===void 0?void 0:i.alignment)===null||f===void 0?void 0:f.protectors)||!1)}return T&&(C.fillStyle="#FFFFFF",C.fillRect(-_,-_,R,_),C.fillRect(-_,L,R,_),C.fillRect(L,-_,_,R),C.fillRect(-_,-_,_,R)),this.options.logoImage?[4,J.loadImage(this.options.logoImage)]:[3,6];case 5:ee=mt.sent(),vt=this.options.logoScale,tt=this.options.logoMargin,gt=this.options.logoCornerRadius,(vt<=0||vt>=1)&&(vt=.2),tt<0&&(tt=0),gt<0&&(gt=0),et=L*vt,dt=.5*(R-et),Pt=dt,C.restore(),C.fillStyle="#FFFFFF",C.save(),r._prepareRoundedCornerClip(C,dt-tt,Pt-tt,et+2*tt,et+2*tt,gt+tt),C.clip(),re=C.globalCompositeOperation,C.globalCompositeOperation="destination-out",C.fill(),C.globalCompositeOperation=re,C.restore(),C.save(),r._prepareRoundedCornerClip(C,dt,Pt,et,et,gt),C.clip(),C.drawImage(ee,dt,Pt,et,et),C.restore(),C.save(),C.translate(_,_),mt.label=6;case 6:if(K){if(Z.forEach(function(it){V||(V=new Je.default(d,d),V.setDelay(it.delay),V.setRepeat(0));var Rt=it.dims,Et=Rt.width,Bt=Rt.height;ot||(ot=J.createCanvas(Et,Bt),pt=ot.getContext("2d"),pt.rect(0,0,ot.width,ot.height),pt.fillStyle="#ffffff",pt.fill()),(!st||!Ct||Et!==st.width||Bt!==st.height)&&(st=J.createCanvas(Et,Bt),zt=st.getContext("2d"),Ct=zt.createImageData(Et,Bt)),Ct.data.set(it.patch),zt.putImageData(Ct,0,0),pt.drawImage(st,it.dims.left,it.dims.top);var oe=J.createCanvas(R,R),wt=oe.getContext("2d");wt.drawImage(ot,0,0,R,R),wt.rect(0,0,R,R),wt.fillStyle=M,wt.fill(),wt.drawImage(A,0,0,R,R);var jt=J.createCanvas(d,d),se=jt.getContext("2d");se.drawImage(oe,0,0,d,d),V.addFrame(se.getImageData(0,0,jt.width,jt.height).data)}),!V)throw new Error("No frames.");return V.finish(),de(this.canvas)?(ie=V.stream().toFlattenUint8Array(),ae=ie.reduce(function(it,Rt){return it+String.fromCharCode(Rt)},""),[2,Promise.resolve("data:image/gif;base64,"+window.btoa(ae))]):[2,Promise.resolve(Buffer.from(V.stream().toFlattenUint8Array()))]}else return F.drawImage(A,0,0,R,R),C.drawImage(Y,-_,-_,R,R),Kt=J.createCanvas(d,d),ne=Kt.getContext("2d"),ne.drawImage(A,0,0,d,d),this.canvas=Kt,de(this.canvas)?[2,Promise.resolve(this.canvas.toDataURL())]:[2,Promise.resolve(this.canvas.toBuffer())]}})})},r.CorrectLevel=Mt.QRErrorCorrectLevel,r.defaultComponentOptions={data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}},r.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"#ffffff",correctLevel:Mt.QRErrorCorrectLevel.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:r.defaultComponentOptions,autoColor:!0},r}();It.AwesomeQR=We;function de(r){try{return r instanceof HTMLElement}catch{return typeof r=="object"&&r.nodeType===1&&typeof r.style=="object"&&typeof r.ownerDocument=="object"}}(function(r){var u=N&&N.__createBinding||(Object.create?function(v,g,c,P){P===void 0&&(P=c),Object.defineProperty(v,P,{enumerable:!0,get:function(){return g[c]}})}:function(v,g,c,P){P===void 0&&(P=c),v[P]=g[c]}),o=N&&N.__exportStar||function(v,g){for(var c in v)c!=="default"&&!g.hasOwnProperty(c)&&u(g,v,c)};Object.defineProperty(r,"__esModule",{value:!0}),o(Jt,r);var p=It;Object.defineProperty(r,"AwesomeQR",{enumerable:!0,get:function(){return p.AwesomeQR}})})(Be);export{Be as l};
