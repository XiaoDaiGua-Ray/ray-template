import{aE as ke,aF as Oe,aG as se,aH as Le,aI as Ve}from"./utils-BjslFNLa.js";import{a as Q,o as de}from"./evtd@0.2.4-CI_DDEu_.js";import{B as ze,d as he,z as K,e as He,a as Xe}from"./seemly@0.3.9-BPHzmlAk.js";import{J as Ye,F as Te,N as De,m as B,y as Ie,g as Ee,x as te,i as ne,O as Fe,h as T,T as _e,f as Y,l as Z,w as J,n as Ce,U as Ae,p as je,L as Ne,M as Pe}from"./@vue_runtime-core@3.5.13-Moo8VrGQ.js";import{k as C,u as D}from"./@vue_reactivity@3.5.13-Bs-wdPxR.js";import{u as re}from"./@css-render_vue3-ssr@0.15.14_vue@3.5.13_typescript@5.6.3_-BATNlskH.js";import{h as Ue,u as U,o as qe,i as Ke}from"./vooks@0.2.12_vue@3.5.13_typescript@5.6.3_-CUP4Zvk0.js";import{z as Ge}from"./vdirs@0.1.8_vue@3.5.13_typescript@5.6.3_-BAjskub0.js";import{R as Je}from"./@juggle_resize-observer@3.4.0-C8OzoCMD.js";import{C as Qe}from"./css-render@0.15.14-C5toWlUr.js";function fe(n,e,t="default"){const r=e[t];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);return r()}function ce(n,e=!0,t=[]){return n.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&t.push(Ye(String(r)));return}if(Array.isArray(r)){ce(r,e,t);return}if(r.type===Te){if(r.children===null)return;Array.isArray(r.children)&&ce(r.children,e,t)}else r.type!==De&&t.push(r)}}),t}function pe(n,e,t="default"){const r=e[t];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);const o=ce(r());if(o.length===1)return o[0];throw new Error(`[vueuc/${n}]: slot[${t}] should have exactly one child.`)}const $t=B({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var e;Ie("VBinder",(e=Ee())===null||e===void 0?void 0:e.proxy);const t=ne("VBinder",null),r=C(null),o=l=>{r.value=l,t&&n.syncTargetWithParent&&t.setTargetRef(l)};let u=[];const b=()=>{let l=r.value;for(;l=ke(l),l!==null;)u.push(l);for(const g of u)de("scroll",g,y,!0)},w=()=>{for(const l of u)Q("scroll",l,y,!0);u=[]},i=new Set,h=l=>{i.size===0&&b(),i.has(l)||i.add(l)},p=l=>{i.has(l)&&i.delete(l),i.size===0&&w()},y=()=>{ze(d)},d=()=>{i.forEach(l=>l())},f=new Set,m=l=>{f.size===0&&de("resize",window,a),f.has(l)||f.add(l)},v=l=>{f.has(l)&&f.delete(l),f.size===0&&Q("resize",window,a)},a=()=>{f.forEach(l=>l())};return te(()=>{Q("resize",window,a),w()}),{targetRef:r,setTargetRef:o,addScrollListener:h,removeScrollListener:p,addResizeListener:m,removeResizeListener:v}},render(){return fe("binder",this.$slots)}}),Mt=B({name:"Target",setup(){const{setTargetRef:n,syncTarget:e}=ne("VBinder");return{syncTarget:e,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:e}=this;return n?Fe(pe("follower",this.$slots),[[e]]):pe("follower",this.$slots)}});function me(n,e){console.error(`[vueuc/${n}]: ${e}`)}const{c:W}=Qe(),oe="vueuc-style";function ve(n){return n&-n}class We{constructor(e,t){this.l=e,this.min=t;const r=new Array(e+1);for(let o=0;o<e+1;++o)r[o]=0;this.ft=r}add(e,t){if(t===0)return;const{l:r,ft:o}=this;for(e+=1;e<=r;)o[e]+=t,e+=ve(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===void 0&&(e=this.l),e<=0)return 0;const{ft:t,min:r,l:o}=this;if(e>o)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let u=e*r;for(;e>0;)u+=t[e],e-=ve(e);return u}getBound(e){let t=0,r=this.l;for(;r>t;){const o=Math.floor((t+r)/2),u=this.sum(o);if(u>e){r=o;continue}else if(u<e){if(t===o)return this.sum(t+1)<=e?t+1:o;t=o}else return o}return t}}function be(n){return typeof n=="string"?document.querySelector(n):n()}const Ze=B({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:Ue(D(n,"show")),mergedTo:Y(()=>{const{to:e}=n;return e??"body"})}},render(){return this.showTeleport?this.disabled?fe("lazy-teleport",this.$slots):T(_e,{disabled:this.disabled,to:this.mergedTo},fe("lazy-teleport",this.$slots)):null}}),R={top:"bottom",bottom:"top",left:"right",right:"left"},we={start:"end",center:"center",end:"start"},ue={top:"height",bottom:"height",left:"width",right:"width"},Re={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},et={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},tt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},ge={top:!0,bottom:!1,left:!0,right:!1},xe={top:"end",bottom:"start",left:"end",right:"start"};function nt(n,e,t,r,o,u){if(!o||u)return{placement:n,top:0,left:0};const[b,w]=n.split("-");let i=w??"center",h={top:0,left:0};const p=(f,m,v)=>{let a=0,l=0;const g=t[f]-e[m]-e[f];return g>0&&r&&(v?l=ge[m]?g:-g:a=ge[m]?g:-g),{left:a,top:l}},y=b==="left"||b==="right";if(i!=="center"){const f=tt[n],m=R[f],v=ue[f];if(t[v]>e[v]){if(e[f]+e[v]<t[v]){const a=(t[v]-e[v])/2;e[f]<a||e[m]<a?e[f]<e[m]?(i=we[w],h=p(v,m,y)):h=p(v,f,y):i="center"}}else t[v]<e[v]&&e[m]<0&&e[f]>e[m]&&(i=we[w])}else{const f=b==="bottom"||b==="top"?"left":"top",m=R[f],v=ue[f],a=(t[v]-e[v])/2;(e[f]<a||e[m]<a)&&(e[f]>e[m]?(i=xe[f],h=p(v,f,y)):(i=xe[m],h=p(v,m,y)))}let d=b;return e[b]<t[ue[b]]&&e[b]<e[R[b]]&&(d=R[b]),{placement:i!=="center"?`${d}-${i}`:d,left:h.left,top:h.top}}function rt(n,e){return e?et[n]:Re[n]}function ot(n,e,t,r,o,u){if(u)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+o)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+o)}px`,transform:"translateX(-50%)"}}}const lt=W([W(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),W(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[W("> *",{pointerEvents:"all"})])]),St=B({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=ne("VBinder"),t=U(()=>n.enabled!==void 0?n.enabled:n.show),r=C(null),o=C(null),u=()=>{const{syncTrigger:d}=n;d.includes("scroll")&&e.addScrollListener(i),d.includes("resize")&&e.addResizeListener(i)},b=()=>{e.removeScrollListener(i),e.removeResizeListener(i)};Z(()=>{t.value&&(i(),u())});const w=re();lt.mount({id:"vueuc/binder",head:!0,anchorMetaName:oe,ssr:w}),te(()=>{b()}),qe(()=>{t.value&&i()});const i=()=>{if(!t.value)return;const d=r.value;if(d===null)return;const f=e.targetRef,{x:m,y:v,overlap:a}=n,l=m!==void 0&&v!==void 0?Oe(m,v):se(f);d.style.setProperty("--v-target-width",`${Math.round(l.width)}px`),d.style.setProperty("--v-target-height",`${Math.round(l.height)}px`);const{width:g,minWidth:$,placement:E,internalShift:_,flip:L}=n;d.setAttribute("v-placement",E),a?d.setAttribute("v-overlap",""):d.removeAttribute("v-overlap");const{style:z}=d;g==="target"?z.width=`${l.width}px`:g!==void 0?z.width=g:z.width="",$==="target"?z.minWidth=`${l.width}px`:$!==void 0?z.minWidth=$:z.minWidth="";const V=se(d),j=se(o.value),{left:H,top:N,placement:P}=nt(E,l,V,_,L,a),s=rt(P,a),{left:c,top:x,transform:M}=ot(P,j,l,N,H,a);d.setAttribute("v-placement",P),d.style.setProperty("--v-offset-left",`${Math.round(H)}px`),d.style.setProperty("--v-offset-top",`${Math.round(N)}px`),d.style.transform=`translateX(${c}) translateY(${x}) ${M}`,d.style.setProperty("--v-transform-origin",s),d.style.transformOrigin=s};J(t,d=>{d?(u(),h()):b()});const h=()=>{Ce().then(i).catch(d=>console.error(d))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(d=>{J(D(n,d),i)}),["teleportDisabled"].forEach(d=>{J(D(n,d),h)}),J(D(n,"syncTrigger"),d=>{d.includes("resize")?e.addResizeListener(i):e.removeResizeListener(i),d.includes("scroll")?e.addScrollListener(i):e.removeScrollListener(i)});const p=Ke(),y=U(()=>{const{to:d}=n;if(d!==void 0)return d;p.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:o,followerRef:r,mergedTo:y,syncPosition:i}},render(){return T(Ze,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,e;const t=T("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[T("div",{class:"v-binder-follower-content",ref:"followerRef"},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))]);return this.zindexable?Fe(t,[[Ge,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});class it{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new(typeof window<"u"&&window.ResizeObserver||Je)(this.handleResize),this.elHandlersMap=new Map}handleResize(e){for(const t of e){const r=this.elHandlersMap.get(t.target);r!==void 0&&r(t)}}registerHandler(e,t){this.elHandlersMap.set(e,t),this.observer.observe(e)}unregisterHandler(e){this.elHandlersMap.has(e)&&(this.elHandlersMap.delete(e),this.observer.unobserve(e))}}const ye=new it,$e=B({name:"ResizeObserver",props:{onResize:Function},setup(n){let e=!1;const t=Ee().proxy;function r(o){const{onResize:u}=n;u!==void 0&&u(o)}Z(()=>{const o=t.$el;if(o===void 0){me("resize-observer","$el does not exist.");return}if(o.nextElementSibling!==o.nextSibling&&o.nodeType===3&&o.nodeValue!==""){me("resize-observer","$el can not be observed (it may be a text node).");return}o.nextElementSibling!==null&&(ye.registerHandler(o.nextElementSibling,r),e=!0)}),te(()=>{e&&ye.unregisterHandler(t.$el.nextElementSibling)})},render(){return Ae(this.$slots,"default")}});let ee;function st(){return typeof document>"u"?!1:(ee===void 0&&("matchMedia"in window?ee=window.matchMedia("(pointer:coarse)").matches:ee=!1),ee)}let ae;function Me(){return typeof document>"u"?1:(ae===void 0&&(ae="chrome"in window?window.devicePixelRatio:1),ae)}const Be="VVirtualListXScroll";function ut({columnsRef:n,renderColRef:e,renderItemWithColsRef:t}){const r=C(0),o=C(0),u=Y(()=>{const h=n.value;if(h.length===0)return null;const p=new We(h.length,0);return h.forEach((y,d)=>{p.add(d,y.width)}),p}),b=U(()=>{const h=u.value;return h!==null?Math.max(h.getBound(o.value)-1,0):0}),w=h=>{const p=u.value;return p!==null?p.sum(h):0},i=U(()=>{const h=u.value;return h!==null?Math.min(h.getBound(o.value+r.value)+1,n.value.length-1):0});return Ie(Be,{startIndexRef:b,endIndexRef:i,columnsRef:n,renderColRef:e,renderItemWithColsRef:t,getLeft:w}),{listWidthRef:r,scrollLeftRef:o}}const Se=B({name:"VirtualListRow",props:{index:{type:Number,required:!0},item:{type:Object,required:!0}},setup(){const{startIndexRef:n,endIndexRef:e,columnsRef:t,getLeft:r,renderColRef:o,renderItemWithColsRef:u}=ne(Be);return{startIndex:n,endIndex:e,columns:t,renderCol:o,renderItemWithCols:u,getLeft:r}},render(){const{startIndex:n,endIndex:e,columns:t,renderCol:r,renderItemWithCols:o,getLeft:u,item:b}=this;if(o!=null)return o({itemIndex:this.index,startColIndex:n,endColIndex:e,allColumns:t,item:b,getLeft:u});if(r!=null){const w=[];for(let i=n;i<=e;++i){const h=t[i];w.push(r({column:h,left:u(i),item:b}))}return w}return null}}),at=W(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[W("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[W("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),zt=B({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},columns:{type:Array,default:()=>[]},renderCol:Function,renderItemWithCols:Function,items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(n){const e=re();at.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:oe,ssr:e}),Z(()=>{const{defaultScrollIndex:s,defaultScrollKey:c}=n;s!=null?a({index:s}):c!=null&&a({key:c})});let t=!1,r=!1;Ne(()=>{if(t=!1,!r){r=!0;return}a({top:f.value,left:b.value})}),Pe(()=>{t=!0,r||(r=!0)});const o=U(()=>{if(n.renderCol==null&&n.renderItemWithCols==null||n.columns.length===0)return;let s=0;return n.columns.forEach(c=>{s+=c.width}),s}),u=Y(()=>{const s=new Map,{keyField:c}=n;return n.items.forEach((x,M)=>{s.set(x[c],M)}),s}),{scrollLeftRef:b,listWidthRef:w}=ut({columnsRef:D(n,"columns"),renderColRef:D(n,"renderCol"),renderItemWithColsRef:D(n,"renderItemWithCols")}),i=C(null),h=C(void 0),p=new Map,y=Y(()=>{const{items:s,itemSize:c,keyField:x}=n,M=new We(s.length,c);return s.forEach((I,F)=>{const S=I[x],A=p.get(S);A!==void 0&&M.add(F,A)}),M}),d=C(0),f=C(0),m=U(()=>Math.max(y.value.getBound(f.value-he(n.paddingTop))-1,0)),v=Y(()=>{const{value:s}=h;if(s===void 0)return[];const{items:c,itemSize:x}=n,M=m.value,I=Math.min(M+Math.ceil(s/x+1),c.length-1),F=[];for(let S=M;S<=I;++S)F.push(c[S]);return F}),a=(s,c)=>{if(typeof s=="number"){E(s,c,"auto");return}const{left:x,top:M,index:I,key:F,position:S,behavior:A,debounce:O=!0}=s;if(x!==void 0||M!==void 0)E(x,M,A);else if(I!==void 0)$(I,A,O);else if(F!==void 0){const le=u.value.get(F);le!==void 0&&$(le,A,O)}else S==="bottom"?E(0,Number.MAX_SAFE_INTEGER,A):S==="top"&&E(0,0,A)};let l,g=null;function $(s,c,x){const{value:M}=y,I=M.sum(s)+he(n.paddingTop);if(!x)i.value.scrollTo({left:0,top:I,behavior:c});else{l=s,g!==null&&window.clearTimeout(g),g=window.setTimeout(()=>{l=void 0,g=null},16);const{scrollTop:F,offsetHeight:S}=i.value;if(I>F){const A=M.get(s);I+A<=F+S||i.value.scrollTo({left:0,top:I+A-S,behavior:c})}else i.value.scrollTo({left:0,top:I,behavior:c})}}function E(s,c,x){i.value.scrollTo({left:s,top:c,behavior:x})}function _(s,c){var x,M,I;if(t||n.ignoreItemResize||P(c.target))return;const{value:F}=y,S=u.value.get(s),A=F.get(S),O=(I=(M=(x=c.borderBoxSize)===null||x===void 0?void 0:x[0])===null||M===void 0?void 0:M.blockSize)!==null&&I!==void 0?I:c.contentRect.height;if(O===A)return;O-n.itemSize===0?p.delete(s):p.set(s,O-n.itemSize);const q=O-A;if(q===0)return;F.add(S,q);const X=i.value;if(X!=null){if(l===void 0){const ie=F.sum(S);X.scrollTop>ie&&X.scrollBy(0,q)}else if(S<l)X.scrollBy(0,q);else if(S===l){const ie=F.sum(S);O+ie>X.scrollTop+X.offsetHeight&&X.scrollBy(0,q)}N()}d.value++}const L=!st();let z=!1;function V(s){var c;(c=n.onScroll)===null||c===void 0||c.call(n,s),(!L||!z)&&N()}function j(s){var c;if((c=n.onWheel)===null||c===void 0||c.call(n,s),L){const x=i.value;if(x!=null){if(s.deltaX===0&&(x.scrollTop===0&&s.deltaY<=0||x.scrollTop+x.offsetHeight>=x.scrollHeight&&s.deltaY>=0))return;s.preventDefault(),x.scrollTop+=s.deltaY/Me(),x.scrollLeft+=s.deltaX/Me(),N(),z=!0,ze(()=>{z=!1})}}}function H(s){if(t||P(s.target))return;if(n.renderCol==null&&n.renderItemWithCols==null){if(s.contentRect.height===h.value)return}else if(s.contentRect.height===h.value&&s.contentRect.width===w.value)return;h.value=s.contentRect.height,w.value=s.contentRect.width;const{onResize:c}=n;c!==void 0&&c(s)}function N(){const{value:s}=i;s!=null&&(f.value=s.scrollTop,b.value=s.scrollLeft)}function P(s){let c=s;for(;c!==null;){if(c.style.display==="none")return!0;c=c.parentElement}return!1}return{listHeight:h,listStyle:{overflow:"auto"},keyToIndex:u,itemsStyle:Y(()=>{const{itemResizable:s}=n,c=K(y.value.sum());return d.value,[n.itemsStyle,{boxSizing:"content-box",width:K(o.value),height:s?"":c,minHeight:s?c:"",paddingTop:K(n.paddingTop),paddingBottom:K(n.paddingBottom)}]}),visibleItemsStyle:Y(()=>(d.value,{transform:`translateY(${K(y.value.sum(m.value))})`})),viewportItems:v,listElRef:i,itemsElRef:C(null),scrollTo:a,handleListResize:H,handleListScroll:V,handleListWheel:j,handleItemResize:_}},render(){const{itemResizable:n,keyField:e,keyToIndex:t,visibleItemsTag:r}=this;return T($e,{onResize:this.handleListResize},{default:()=>{var o,u;return T("div",je(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?T("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[T(r,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>{const{renderCol:b,renderItemWithCols:w}=this;return this.viewportItems.map(i=>{const h=i[e],p=t.get(h),y=b!=null?T(Se,{index:p,item:i}):void 0,d=w!=null?T(Se,{index:p,item:i}):void 0,f=this.$slots.default({item:i,renderedCols:y,renderedItemWithCols:d,index:p})[0];return n?T($e,{key:h,onResize:m=>this.handleItemResize(h,m)},{default:()=>f}):(f.key=h,f)})}})]):(u=(o=this.$slots).empty)===null||u===void 0?void 0:u.call(o)])}})}}),dt=W(".v-x-scroll",{overflow:"auto",scrollbarWidth:"none"},[W("&::-webkit-scrollbar",{width:0,height:0})]),Tt=B({name:"XScroll",props:{disabled:Boolean,onScroll:Function},setup(){const n=C(null);function e(o){!(o.currentTarget.offsetWidth<o.currentTarget.scrollWidth)||o.deltaY===0||(o.currentTarget.scrollLeft+=o.deltaY+o.deltaX,o.preventDefault())}const t=re();return dt.mount({id:"vueuc/x-scroll",head:!0,anchorMetaName:oe,ssr:t}),Object.assign({selfRef:n,handleWheel:e},{scrollTo(...o){var u;(u=n.value)===null||u===void 0||u.scrollTo(...o)}})},render(){return T("div",{ref:"selfRef",onScroll:this.onScroll,onWheel:this.disabled?void 0:this.handleWheel,class:"v-x-scroll"},this.$slots)}}),k="v-hidden",ft=W("[v-hidden]",{display:"none!important"}),It=B({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(n,{slots:e}){const t=C(null),r=C(null);function o(b){const{value:w}=t,{getCounter:i,getTail:h}=n;let p;if(i!==void 0?p=i():p=r.value,!w||!p)return;p.hasAttribute(k)&&p.removeAttribute(k);const{children:y}=w;if(b.showAllItemsBeforeCalculate)for(const $ of y)$.hasAttribute(k)&&$.removeAttribute(k);const d=w.offsetWidth,f=[],m=e.tail?h==null?void 0:h():null;let v=m?m.offsetWidth:0,a=!1;const l=w.children.length-(e.tail?1:0);for(let $=0;$<l-1;++$){if($<0)continue;const E=y[$];if(a){E.hasAttribute(k)||E.setAttribute(k,"");continue}else E.hasAttribute(k)&&E.removeAttribute(k);const _=E.offsetWidth;if(v+=_,f[$]=_,v>d){const{updateCounter:L}=n;for(let z=$;z>=0;--z){const V=l-1-z;L!==void 0?L(V):p.textContent=`${V}`;const j=p.offsetWidth;if(v-=f[z],v+j<=d||z===0){a=!0,$=z-1,m&&($===-1?(m.style.maxWidth=`${d-j}px`,m.style.boxSizing="border-box"):m.style.maxWidth="");const{onUpdateCount:H}=n;H&&H(V);break}}}}const{onUpdateOverflow:g}=n;a?g!==void 0&&g(!0):(g!==void 0&&g(!1),p.setAttribute(k,""))}const u=re();return ft.mount({id:"vueuc/overflow",head:!0,anchorMetaName:oe,ssr:u}),Z(()=>o({showAllItemsBeforeCalculate:!1})),{selfRef:t,counterRef:r,sync:o}},render(){const{$slots:n}=this;return Ce(()=>this.sync({showAllItemsBeforeCalculate:!1})),T("div",{class:"v-overflow",ref:"selfRef"},[Ae(n,"default"),n.counter?n.counter():T("span",{style:{display:"inline-block"},ref:"counterRef"}),n.tail?n.tail():null])}});let G=[];const Et=B({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(n){const e=He(),t=C(null),r=C(null);let o=!1,u=!1;const b=typeof document>"u"?null:document.activeElement;function w(){return G[G.length-1]===e}function i(a){var l;a.code==="Escape"&&w()&&((l=n.onEsc)===null||l===void 0||l.call(n,a))}Z(()=>{J(()=>n.active,a=>{a?(y(),de("keydown",document,i)):(Q("keydown",document,i),o&&d())},{immediate:!0})}),te(()=>{Q("keydown",document,i),o&&d()});function h(a){if(!u&&w()){const l=p();if(l===null||l.contains(Xe(a)))return;f("first")}}function p(){const a=t.value;if(a===null)return null;let l=a;for(;l=l.nextSibling,!(l===null||l instanceof Element&&l.tagName==="DIV"););return l}function y(){var a;if(!n.disabled){if(G.push(e),n.autoFocus){const{initialFocusTo:l}=n;l===void 0?f("first"):(a=be(l))===null||a===void 0||a.focus({preventScroll:!0})}o=!0,document.addEventListener("focus",h,!0)}}function d(){var a;if(n.disabled||(document.removeEventListener("focus",h,!0),G=G.filter(g=>g!==e),w()))return;const{finalFocusTo:l}=n;l!==void 0?(a=be(l))===null||a===void 0||a.focus({preventScroll:!0}):n.returnFocusOnDeactivated&&b instanceof HTMLElement&&(u=!0,b.focus({preventScroll:!0}),u=!1)}function f(a){if(w()&&n.active){const l=t.value,g=r.value;if(l!==null&&g!==null){const $=p();if($==null||$===g){u=!0,l.focus({preventScroll:!0}),u=!1;return}u=!0;const E=a==="first"?Le($):Ve($);u=!1,E||(u=!0,l.focus({preventScroll:!0}),u=!1)}}}function m(a){if(u)return;const l=p();l!==null&&(a.relatedTarget!==null&&l.contains(a.relatedTarget)?f("last"):f("first"))}function v(a){u||(a.relatedTarget!==null&&a.relatedTarget===t.value?f("last"):f("first"))}return{focusableStartRef:t,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:m,handleEndFocus:v}},render(){const{default:n}=this.$slots;if(n===void 0)return null;if(this.disabled)return n();const{active:e,focusableStyle:t}=this;return T(Te,null,[T("div",{"aria-hidden":"true",tabindex:e?"0":"-1",ref:"focusableStartRef",style:t,onFocus:this.handleStartFocus}),n(),T("div",{"aria-hidden":"true",style:t,ref:"focusableEndRef",tabindex:e?"0":"-1",onFocus:this.handleEndFocus})])}});export{$t as B,Et as F,Ze as L,$e as V,zt as a,St as b,Mt as c,It as d,Tt as e,ye as r};
