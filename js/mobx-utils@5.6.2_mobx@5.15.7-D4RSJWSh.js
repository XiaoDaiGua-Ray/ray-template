import{b as c,o as h,k as K,e as D,f as R,h as N,a as w,j as B,r as S,O as L,l as $,m as z,n as F,$ as q,p as E,q as J,u as U,v as W,w as x}from"./mobx@5.15.7-BvNiR7Ki.js";function H(e){throw new Error("[mobx-utils] "+e)}function _(e,o){o===void 0&&(o="Illegal state"),e||H(o)}var M=function(e){return e&&e!==Object.prototype&&Object.getOwnPropertyNames(e).concat(M(Object.getPrototypeOf(e))||[])},Q=function(e){var o=M(e),t=o.filter(function(r,n){return o.indexOf(r)===n});return t},X=function(e){return Q(e).filter(function(o){return o!=="constructor"&&!~o.indexOf("__")})},G="pending",O="fulfilled",P="rejected";function Y(e){switch(this.state){case G:return e.pending&&e.pending(this.value);case P:return e.rejected&&e.rejected(this.value);case O:return e.fulfilled?e.fulfilled(this.value):this.value}}function Z(e,o){if(_(arguments.length<=2,"fromPromise expects up to two arguments"),_(typeof e=="function"||typeof e=="object"&&e&&typeof e.then=="function","Please pass a promise or function to fromPromise"),e.isPromiseBasedObservable===!0)return e;typeof e=="function"&&(e=new Promise(e));var t=e;e.then(c("observableFromPromise-resolve",function(n){t.value=n,t.state=O}),c("observableFromPromise-reject",function(n){t.value=n,t.state=P})),t.isPromiseBasedObservable=!0,t.case=Y;var r=o&&o.state===O?o.value:void 0;return $(t,{value:r,state:G},{},{deep:!1}),t}(function(e){e.reject=c("fromPromise.reject",function(t){var r=e(Promise.reject(t));return r.state=P,r.value=t,r});function o(t){t===void 0&&(t=void 0);var r=e(Promise.resolve(t));return r.state=O,r.value=t,r}e.resolve=c("fromPromise.resolve",o)})(Z);var y=function(e,o,t,r){var n=arguments.length,s=n<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,o,t,r);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(s=(n<3?a(s):n>3?a(o,t,s):a(o,t))||s);return n>3&&s&&Object.defineProperty(o,t,s),s};(function(){function e(o,t){var r=this;z(function(){r.current=t,r.subscription=o.subscribe(r)})}return e.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},e.prototype.next=function(o){this.current=o},e.prototype.complete=function(){this.dispose()},e.prototype.error=function(o){this.current=o,this.dispose()},y([h.ref],e.prototype,"current",void 0),y([c.bound],e.prototype,"next",null),y([c.bound],e.prototype,"complete",null),y([c.bound],e.prototype,"error",null),e})();var g=function(){return g=Object.assign||function(e){for(var o,t=1,r=arguments.length;t<r;t++){o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},g.apply(this,arguments)},b=function(e,o,t,r){var n=arguments.length,s=n<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,o,t,r);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(s=(n<3?a(s):n>3?a(o,t,s):a(o,t))||s);return n>3&&s&&Object.defineProperty(o,t,s),s},k=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function e(o){var t=this;this.model=o,this.localValues=h.map({}),this.localComputedValues=h.map({}),this.isPropertyDirty=function(r){return t.localValues.has(r)},_(F(o),"createViewModel expects an observable object"),X(o).forEach(function(r){if(!(r===q||r==="__mobxDidRunLazyInitializers")){if(_(k.indexOf(r)===-1,"The propertyname "+r+" is reserved and cannot be used with viewModels"),E(o,r)){var n=J(o,r).derivation;t.localComputedValues.set(r,w(n.bind(t)))}var s=Object.getOwnPropertyDescriptor(o,r),a=s?{enumerable:s.enumerable}:{};Object.defineProperty(t,r,g(g({},a),{configurable:!0,get:function(){return E(o,r)?t.localComputedValues.get(r).get():t.isPropertyDirty(r)?t.localValues.get(r):t.model[r]},set:c(function(u){u!==t.model[r]?t.localValues.set(r,u):t.localValues.delete(r)})}))}})}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),e.prototype.submit=function(){var o=this;K(this.localValues).forEach(function(t){var r=o.localValues.get(t),n=o.model[t];D(n)?n.replace(r):R(n)?(n.clear(),n.merge(r)):N(r)||(o.model[t]=r)}),this.localValues.clear()},e.prototype.reset=function(){this.localValues.clear()},e.prototype.resetProperty=function(o){this.localValues.delete(o)},b([w],e.prototype,"isDirty",null),b([w],e.prototype,"changedValues",null),b([c.bound],e.prototype,"submit",null),b([c.bound],e.prototype,"reset",null),b([c.bound],e.prototype,"resetProperty",null),e})();function I(e){if(!e)return"ROOT";for(var o=[];e.parent;)o.push(e.path),e=e.parent;return o.reverse().join("/")}function V(e){return F(e)||D(e)||R(e)}function re(e,o){var t=new WeakMap;function r(u){var l=t.get(u.object);n(u,l),o(u,I(l),e)}function n(u,l){switch(u.type){case"add":s(u.newValue,l,u.name);break;case"update":a(u.oldValue),s(u.newValue,l,u.name||""+u.index);break;case"remove":case"delete":a(u.oldValue);break;case"splice":u.removed.map(a),u.added.forEach(function(d,f){return s(d,l,""+(u.index+f))});for(var p=u.index+u.addedCount;p<u.object.length;p++)if(V(u.object[p])){var i=t.get(u.object[p]);i&&(i.path=""+p)}break}}function s(u,l,p){if(V(u)){var i=t.get(u);if(i){if(i.parent!==l||i.path!==p)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+I(l)+"/"+p+"',")+(" but it already exists at '"+I(i.parent)+"/"+i.path+"'"))}else{var d={parent:l,path:p,dispose:B(u,r)};t.set(u,d),U(u).forEach(function(f){var v=f[0],m=f[1];return s(m,d,v)})}}}function a(u){if(V(u)){var l=t.get(u);if(!l)return;t.delete(u),l.dispose(),W(u).forEach(a)}}return s(e,void 0,""),function(){a(e)}}var ee=function(){var e=function(o,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},e(o,t)};return function(o,t){e(o,t);function r(){this.constructor=o}o.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(e){ee(o,e);function o(t,r,n){var s=n===void 0?{}:n,a=s.name,u=a===void 0?"ogm"+(Math.random()*1e3|0):a,l=s.keyToName,p=l===void 0?function(f){return""+f}:l,i=e.call(this)||this;i._keyToName=p,i._groupBy=r,i._ogmInfoKey=Symbol("ogmInfo"+u),i._base=t;for(var d=0;d<t.length;d++)i._addItem(t[d]);return i._disposeBaseObserver=B(i._base,function(f){if(f.type==="splice")x(function(){for(var v=0,m=f.removed;v<m.length;v++){var T=m[v];i._removeItem(T)}for(var j=0,A=f.added;j<A.length;j++){var C=A[j];i._addItem(C)}});else if(f.type==="update")x(function(){i._removeItem(f.oldValue),i._addItem(f.newValue)});else throw new Error("illegal state")}),i}return o.prototype.clear=function(){throw new Error("not supported")},o.prototype.delete=function(t){throw new Error("not supported")},o.prototype.set=function(t,r){throw new Error("not supported")},o.prototype.dispose=function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var r=this._base[t],n=r[this._ogmInfoKey];n.reaction(),delete r[this._ogmInfoKey]}},o.prototype._getGroupArr=function(t){var r=e.prototype.get.call(this,t);return r===void 0&&(r=h([],{name:"GroupArray["+this._keyToName(t)+"]",deep:!1}),e.prototype.set.call(this,t,r)),r},o.prototype._removeFromGroupArr=function(t,r){var n=e.prototype.get.call(this,t);n.length===1?e.prototype.delete.call(this,t):(r===n.length-1||(n[r]=n[n.length-1],n[r][this._ogmInfoKey].groupArrIndex=r),n.length--)},o.prototype._addItem=function(t){var r=this,n=this._groupBy(t),s=this._getGroupArr(n),a={groupByValue:n,groupArrIndex:s.length,reaction:S(function(){return r._groupBy(t)},function(u,l){var p=t[r._ogmInfoKey];r._removeFromGroupArr(p.groupByValue,p.groupArrIndex);var i=r._getGroupArr(u),d=i.length;i.push(t),p.groupByValue=u,p.groupArrIndex=d})};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:a}),s.push(t)},o.prototype._removeItem=function(t){var r=t[this._ogmInfoKey];this._removeFromGroupArr(r.groupByValue,r.groupArrIndex),r.reaction(),delete t[this._ogmInfoKey]},o})(L);Promise.resolve(),typeof queueMicrotask<"u"||typeof process<"u"&&process.nextTick;export{re as d};
